# ç”¨æˆ·æ•°æ®ç”Ÿæˆè„šæœ¬ä½¿ç”¨æŒ‡å—

## ğŸµ LAYå¼ è‰ºå…´éŸ³ä¹ç½‘ç«™ - ç”¨æˆ·ç®¡ç†è„šæœ¬

è¿™ä¸ªè„šæœ¬ç”¨äºè‡ªåŠ¨ç”Ÿæˆå’Œç®¡ç†ç”¨æˆ·è´¦å·æ•°æ®ï¼Œæ”¯æŒå•ä¸ªåˆ›å»ºã€æ‰¹é‡åˆ›å»ºå’Œéšæœºç”ŸæˆåŠŸèƒ½ã€‚

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

- âœ… å•ä¸ªç”¨æˆ·åˆ›å»º
- âœ… æ‰¹é‡ç”¨æˆ·åˆ›å»ºï¼ˆä»JSONæ–‡ä»¶ï¼‰
- âœ… éšæœºç”¨æˆ·æ•°æ®ç”Ÿæˆ
- âœ… å¯†ç è‡ªåŠ¨åŠ å¯†
- âœ… æ•°æ®éªŒè¯å’Œé”™è¯¯å¤„ç†
- âœ… è¯¦ç»†çš„æ‰§è¡Œæ—¥å¿—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹å®‰è£…axios
npm install axios
```

### 2. ç¡®ä¿åç«¯æœåŠ¡è¿è¡Œ

```bash
# å¯åŠ¨åç«¯æœåŠ¡
cd backend
java -jar target/music-admin-1.0.0.jar
```

### 3. è¿è¡Œè„šæœ¬

```bash
cd scripts

# æŸ¥çœ‹å¸®åŠ©
node create-users.js --help

# åˆ›å»ºç¤ºä¾‹æ–‡ä»¶
node create-users.js --sample
```

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### å•ä¸ªç”¨æˆ·åˆ›å»º

```bash
# åŸºç¡€åˆ›å»º
node create-users.js --username test1 --password 123456 --realName "æµ‹è¯•ç”¨æˆ·1"

# å®Œæ•´ä¿¡æ¯åˆ›å»º
node create-users.js \
  --username admin2 \
  --password admin123 \
  --realName "ç®¡ç†å‘˜2" \
  --email admin2@laymusic.com \
  --department "æŠ€æœ¯éƒ¨" \
  --position "ç³»ç»Ÿç®¡ç†å‘˜" \
  --role "ADMIN"
```

### æ‰¹é‡åˆ›å»ºï¼ˆä»æ–‡ä»¶ï¼‰

```bash
# 1. å…ˆåˆ›å»ºç¤ºä¾‹æ–‡ä»¶
node create-users.js --sample

# 2. ç¼–è¾‘ sample-users.json æ–‡ä»¶æ·»åŠ ç”¨æˆ·æ•°æ®

# 3. æ‰¹é‡åˆ›å»º
node create-users.js --batch --file sample-users.json
```

### å¿«é€Ÿç”Ÿæˆéšæœºç”¨æˆ·

```bash
# ç”Ÿæˆ10ä¸ªéšæœºç”¨æˆ·
node create-users.js --generate 10

# ç”Ÿæˆ50ä¸ªéšæœºç”¨æˆ·
node create-users.js --generate 50
```

## ğŸ“ JSONæ–‡ä»¶æ ¼å¼

### ç”¨æˆ·æ•°ç»„æ ¼å¼
```json
[
  {
    "username": "user1",
    "password": "password123",
    "realName": "ç”¨æˆ·1",
    "email": "user1@laymusic.com",
    "department": "æŠ€æœ¯éƒ¨",
    "position": "å¼€å‘å·¥ç¨‹å¸ˆ",
    "role": "USER"
  },
  {
    "username": "user2",
    "password": "password456",
    "realName": "ç”¨æˆ·2",
    "email": "user2@laymusic.com",
    "department": "äº§å“éƒ¨",
    "position": "äº§å“ç»ç†",
    "role": "USER"
  }
]
```

### åŒ…å«userså­—æ®µçš„å¯¹è±¡æ ¼å¼
```json
{
  "users": [
    {
      "username": "user1",
      "password": "password123",
      "realName": "ç”¨æˆ·1"
    }
  ]
}
```

## ğŸ”§ å‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | å¿…å¡« | é»˜è®¤å€¼ |
|------|------|------|--------|
| `--username` | ç”¨æˆ·å | âœ… | - |
| `--password` | å¯†ç  | âœ… | - |
| `--realName` | çœŸå®å§“å | âœ… | - |
| `--email` | é‚®ç®±åœ°å€ | âŒ | ç©ºå­—ç¬¦ä¸² |
| `--department` | éƒ¨é—¨ | âŒ | ç©ºå­—ç¬¦ä¸² |
| `--position` | èŒä½ | âŒ | ç©ºå­—ç¬¦ä¸² |
| `--role` | è§’è‰² | âŒ | USER |
| `--batch` | æ‰¹é‡æ¨¡å¼ | âŒ | false |
| `--file` | JSONæ–‡ä»¶è·¯å¾„ | âŒ | - |
| `--generate` | ç”Ÿæˆéšæœºç”¨æˆ·æ•°é‡ | âŒ | - |
| `--sample` | åˆ›å»ºç¤ºä¾‹æ–‡ä»¶ | âŒ | false |
| `--help` | æ˜¾ç¤ºå¸®åŠ© | âŒ | false |

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šåˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·
```bash
node create-users.js \
  --username superadmin \
  --password SuperAdmin@2025 \
  --realName "è¶…çº§ç®¡ç†å‘˜" \
  --email superadmin@laymusic.com \
  --department "ç®¡ç†å±‚" \
  --position "ç³»ç»Ÿè¶…çº§ç®¡ç†å‘˜" \
  --role "ADMIN"
```

### ç¤ºä¾‹2ï¼šæ‰¹é‡åˆ›å»ºæµ‹è¯•ç”¨æˆ·
```bash
# 1. åˆ›å»ºç¤ºä¾‹æ–‡ä»¶
node create-users.js --sample

# 2. ä¿®æ”¹ sample-users.jsonï¼Œæ·»åŠ æ›´å¤šç”¨æˆ·

# 3. æ‰§è¡Œæ‰¹é‡åˆ›å»º
node create-users.js --batch --file sample-users.json
```

### ç¤ºä¾‹3ï¼šå¿«é€Ÿç”Ÿæˆæ¼”ç¤ºæ•°æ®
```bash
# ç”Ÿæˆ20ä¸ªéšæœºç”¨æˆ·ç”¨äºæ¼”ç¤º
node create-users.js --generate 20
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **åç«¯æœåŠ¡**ï¼šç¡®ä¿åç«¯æœåŠ¡åœ¨ `http://localhost:8080` æ­£å¸¸è¿è¡Œ
2. **æƒé™éªŒè¯**ï¼šè„šæœ¬éœ€è¦æœ‰æ•ˆçš„ç®¡ç†å‘˜Tokenï¼Œå®é™…ä½¿ç”¨æ—¶éœ€è¦å…ˆç™»å½•è·å–çœŸå®Token
3. **æ•°æ®å®‰å…¨**ï¼šå¯†ç ä¼šè‡ªåŠ¨ä½¿ç”¨SHA-256+ç›å€¼è¿›è¡ŒåŠ å¯†å­˜å‚¨
4. **å”¯ä¸€æ€§**ï¼šç”¨æˆ·åå¿…é¡»å”¯ä¸€ï¼Œé‡å¤çš„ç”¨æˆ·åä¼šåˆ›å»ºå¤±è´¥
5. **ç½‘ç»œè¿æ¥**ï¼šç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸ï¼ŒAPIè°ƒç”¨è¶…æ—¶æ—¶é—´ä¸º10ç§’

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é”™è¯¯

1. **è¿æ¥è¢«æ‹’ç»**
   ```
   âŒ ç”¨æˆ·åˆ›å»ºå¼‚å¸¸: user1 - connect ECONNREFUSED 127.0.0.1:8080
   ```
   **è§£å†³æ–¹æ¡ˆ**ï¼šç¡®ä¿åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œ

2. **ç”¨æˆ·åå·²å­˜åœ¨**
   ```
   âŒ ç”¨æˆ·åˆ›å»ºå¤±è´¥: user1 - ç”¨æˆ·åå·²å­˜åœ¨
   ```
   **è§£å†³æ–¹æ¡ˆ**ï¼šæ›´æ¢ç”¨æˆ·åæˆ–åˆ é™¤ç°æœ‰ç”¨æˆ·

3. **æ–‡ä»¶ä¸å­˜åœ¨**
   ```
   âŒ æ–‡ä»¶ä¸å­˜åœ¨: /path/to/users.json
   ```
   **è§£å†³æ–¹æ¡ˆ**ï¼šæ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®

4. **JSONæ ¼å¼é”™è¯¯**
   ```
   âŒ è¯»å–æ–‡ä»¶å¤±è´¥: Unexpected token } in JSON
   ```
   **è§£å†³æ–¹æ¡ˆ**ï¼šæ£€æŸ¥JSONæ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®

### è°ƒè¯•æ¨¡å¼

å¦‚éœ€æŸ¥çœ‹è¯¦ç»†çš„APIè¯·æ±‚ä¿¡æ¯ï¼Œå¯ä»¥åœ¨è„šæœ¬ä¸­å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼š

```javascript
// åœ¨è„šæœ¬å¼€å¤´æ·»åŠ 
process.env.NODE_DEBUG = 'axios';
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. åç«¯æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
2. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
3. JSONæ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®
4. å‚æ•°æ˜¯å¦å®Œæ•´

## ğŸ”„ æ›´æ–°æ—¥å¿—

- **v1.0.0** (2025-06-08)
  - åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
  - æ”¯æŒå•ä¸ªå’Œæ‰¹é‡ç”¨æˆ·åˆ›å»º
  - æ”¯æŒéšæœºç”¨æˆ·ç”Ÿæˆ
  - å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿— 