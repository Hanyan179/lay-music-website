# 🎵 LAY张艺兴音乐网站 - 后台管理系统使用指南

## 📋 系统概述

本系统是基于若依(RuoYi)框架开发的LAY张艺兴音乐主题网站后台管理系统，提供完整的内容管理、用户管理和系统维护功能。

### 🏗️ 系统架构

```
┌─────────────────────────────────────────────────────────────┐
│                    LAY音乐网站系统架构                          │
├─────────────────────────────────────────────────────────────┤
│  🌐 用户访问层 (端口3004)                                      │
│  ├── 展示前端 (Vue 3 + Vite)                                 │
│  │   ├── 主页面展示                                          │
│  │   ├── 3D效果页面                                          │
│  │   ├── 时间线展示                                          │
│  │   └── 音乐播放器                                          │
│  │                                                          │
│  🏢 管理层 (端口8083)                                         │
│  ├── 若依管理前端 (Vue 2 + Element UI)                        │
│  │   ├── 用户登录界面                                         │
│  │   ├── 内容管理界面                                         │
│  │   ├── 权限控制                                           │
│  │   └── 系统管理                                           │
│  │                                                          │
│  🔌 API服务层 (端口8082)                                      │
│  └── 数据API服务 (Node.js + Express)                         │
│      ├── 用户认证 (/login, /captcha)                         │
│      ├── 数据接口 (/api/data/*)                              │
│      ├── 管理接口 (/api/admin/*)                             │
│      └── 权限控制                                           │
│                                                             │
│  💾 数据层                                                   │
│  ├── MySQL数据库 (用户认证)                                   │
│  └── JSON文件存储 (展示数据)                                  │
└─────────────────────────────────────────────────────────────┘
```

## 🚀 快速启动

### 方法一：一键启动 (推荐)

1. **运行启动脚本**
   ```cmd
   start-all-services.bat
   ```

2. **等待服务启动**
   - 会自动打开3个命令窗口
   - 等待约15秒完成启动

### 方法二：手动启动

#### 步骤1：启动后端API服务
```cmd
node data-api-backend.cjs
```

#### 步骤2：启动若依管理前端
```cmd
npm run dev --prefix ruoyi-admin-system/ruoyi-ui
```

#### 步骤3：启动展示前端 (可选)
```cmd
npm run dev
```

### 🔗 访问地址

- **若依管理后台**: http://localhost:8083/
- **展示前端**: http://localhost:3004/
- **API验证页面**: http://localhost:3004/verify-api-simple.html

## 🔐 登录使用

### 管理员登录

1. **访问登录页面**
   ```
   http://localhost:8083/
   ```

2. **登录凭据**
   - 用户名：`admin`
   - 密码：`LayMusic@2025`
   - 验证码：输入显示的验证码

3. **登录验证**
   - 系统会验证用户名密码
   - 生成JWT Token用于后续请求
   - 跳转到管理主页

## 📊 功能模块

### 1. 内容管理

#### 🎵 音乐管理
- **路径**: 内容管理 > 音乐管理
- **功能**:
  - 查看所有音乐数据
  - 管理专辑信息
  - 编辑歌曲详情
  - 上传音乐封面
  - 设置播放列表

**数据结构**:
```json
{
  "albums": [
    {
      "id": "album_001",
      "title": "专辑名称",
      "artist": "LAY张艺兴",
      "releaseDate": "2024-01-01",
      "cover": "封面图片URL",
      "tracks": ["歌曲列表"]
    }
  ],
  "singles": ["单曲列表"],
  "playlists": ["播放列表"]
}
```

#### 📅 时间线管理
- **路径**: 内容管理 > 时间线管理
- **功能**:
  - 管理重要事件
  - 编辑里程碑
  - 设置事件时间
  - 上传事件图片

**数据结构**:
```json
{
  "events": [
    {
      "id": "event_001",
      "title": "事件标题",
      "date": "2024-01-01",
      "description": "事件描述",
      "image": "事件图片URL",
      "category": "事件分类"
    }
  ]
}
```

#### 💬 留言管理
- **路径**: 内容管理 > 留言管理
- **功能**:
  - 查看用户留言
  - 审核留言内容
  - 删除不当留言
  - 回复用户留言

**数据结构**:
```json
{
  "messages": [
    {
      "id": "msg_001",
      "username": "用户名",
      "content": "留言内容",
      "timestamp": "2024-01-01T10:00:00Z",
      "status": "approved|pending|rejected",
      "reply": "管理员回复"
    }
  ]
}
```

### 2. 系统管理

#### 👥 用户管理
- **路径**: 系统管理 > 用户管理
- **功能**:
  - 查看所有用户
  - 添加新用户
  - 编辑用户信息
  - 重置用户密码
  - 设置用户角色

**用户角色**:
- `ADMIN`: 管理员 - 完全权限
- `USER`: 普通用户 - 只读权限

## 🔧 API接口说明

### 认证接口

| 接口 | 方法 | 说明 |
|------|------|------|
| `/captchaImage` | GET | 获取验证码图片 |
| `/login` | POST | 用户登录 |
| `/getInfo` | GET | 获取用户信息 |
| `/getRouters` | GET | 获取用户权限路由 |

### 数据接口 (公开)

| 接口 | 方法 | 说明 |
|------|------|------|
| `/api/data/music` | GET | 获取音乐数据 |
| `/api/data/timeline` | GET | 获取时间线数据 |
| `/api/data/messages` | GET | 获取已审核留言 |

### 管理接口 (需要认证)

| 接口 | 方法 | 说明 |
|------|------|------|
| `/api/admin/data/music` | POST | 更新音乐数据 |
| `/api/admin/data/timeline` | POST | 更新时间线数据 |
| `/api/admin/data/messages` | GET | 获取所有留言 |
| `/api/admin/data/messages` | POST | 管理留言(审核/删除) |

## 🛠️ 数据维护

### 1. 音乐数据维护

**添加新专辑**:
1. 进入音乐管理页面
2. 点击"添加专辑"
3. 填写专辑信息
4. 上传封面图片
5. 保存提交

**编辑歌曲信息**:
1. 在音乐列表中找到目标歌曲
2. 点击"编辑"按钮
3. 修改歌曲详情
4. 保存更改

### 2. 时间线数据维护

**添加重要事件**:
1. 进入时间线管理页面
2. 点击"添加事件"
3. 设置事件日期和标题
4. 编写事件描述
5. 上传相关图片
6. 保存提交

**编辑现有事件**:
1. 在时间线列表中找到目标事件
2. 点击"编辑"按钮
3. 修改事件信息
4. 更新保存

### 3. 留言数据维护

**审核用户留言**:
1. 进入留言管理页面
2. 查看待审核留言
3. 阅读留言内容
4. 选择"通过"或"拒绝"
5. 可添加管理员回复

**删除不当留言**:
1. 在留言列表中选择目标留言
2. 点击"删除"按钮
3. 确认删除操作

## 🔒 权限控制

### 角色权限

**管理员 (ADMIN)**:
- ✅ 所有内容管理权限
- ✅ 用户管理权限
- ✅ 系统设置权限
- ✅ 数据导入导出权限

**普通用户 (USER)**:
- ✅ 查看内容权限
- ❌ 编辑内容权限
- ❌ 用户管理权限
- ❌ 系统设置权限

### 接口权限

**公开接口** (无需认证):
- 获取音乐数据
- 获取时间线数据
- 获取已审核留言

**管理员接口** (需要ADMIN权限):
- 更新所有数据
- 用户管理
- 系统配置

## 🚨 故障排除

### 常见问题

#### 1. 无法登录
**症状**: 用户名密码正确但无法登录
**解决方案**:
1. 检查API服务是否启动 (端口8082)
2. 验证数据库连接
3. 检查用户账号是否存在

#### 2. 页面无法加载
**症状**: 若依管理页面无法访问
**解决方案**:
1. 确认前端服务启动 (端口8083)
2. 检查网络代理设置
3. 清除浏览器缓存

#### 3. API调用失败
**症状**: 数据无法加载或保存
**解决方案**:
1. 检查后端API服务状态
2. 验证Token是否有效
3. 查看浏览器控制台错误

#### 4. 端口占用
**症状**: 服务启动失败，提示端口占用
**解决方案**:
```cmd
# 查找占用进程
netstat -ano | findstr ":8082"
netstat -ano | findstr ":8083"

# 结束占用进程
taskkill /PID <进程号> /F
```

### 服务状态检查

**检查所有服务状态**:
```cmd
# 检查端口占用
netstat -ano | findstr ":8082"  # API服务
netstat -ano | findstr ":8083"  # 若依前端
netstat -ano | findstr ":3004"  # 展示前端

# 健康检查
curl http://localhost:8082/captchaImage  # API健康检查
curl http://localhost:8083/              # 前端健康检查
```

## 📝 使用技巧

### 1. 数据备份
- 定期备份 `data/` 目录下的JSON文件
- 备份MySQL数据库用户表
- 导出重要配置文件

### 2. 性能优化
- 定期清理无用日志
- 优化图片大小和格式
- 监控服务器资源使用

### 3. 安全建议
- 定期更换管理员密码
- 限制管理后台访问IP
- 开启HTTPS访问
- 定期更新系统依赖

## 📞 技术支持

如遇到问题，请按以下顺序排查：

1. **查看服务状态**: 使用 `verify-api-simple.html` 页面检查
2. **检查日志**: 查看命令行输出的错误信息
3. **重启服务**: 使用 `start-all-services.bat` 重新启动
4. **清除缓存**: 清除浏览器缓存并刷新页面

---

🎵 **LAY张艺兴音乐网站后台管理系统** - 专业、高效、易用的内容管理平台 