<template>
    <div class="artist-journey">
      <!-- Èü≥Ê≥¢Á≤íÂ≠êËÉåÊôØÁîªÂ∏É -->
      <canvas id="particles-canvas"></canvas>
      
    
      <!-- ÂØºËà™Ê†è -->
      <nav class="fixed top-0 w-full z-[90] bg-transparent">
        <div class="container mx-auto px-6 py-4">
          <div class="flex items-center justify-between">
            <div class="music-brand text-gray-800">
              LAY Âº†Ëâ∫ÂÖ¥
            </div>
            <div class="flex space-x-8">
              <a href="#home" class="nav-link">È¶ñÈ°µ</a>
              <a href="#about" class="nav-link">ÁÆÄ‰ªã</a>
              <a href="#music" class="nav-link">Èü≥‰πê</a>
              <a href="#videos" class="nav-link">ËßÜÈ¢ë</a>
              <a href="#timeline" class="nav-link">Êó∂Èó¥ËΩ¥</a>
              <a href="#kindredSpirit" class="nav-link">Â•π‰ª¨</a>
              <a href="#other" class="nav-link">È£éÊ†º</a>
              <button @click="switchToMobile" class="switch-mobile-btn" title="ÂàáÊç¢Âà∞ÁßªÂä®Áâà">
                üì±
              </button>
            </div>
            <button id="menu-toggle" class="md:hidden control-button" title="ËèúÂçï">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
              </svg>
            </button>
          </div>
        </div>
      </nav>
  
      <!-- ‰∏ªÈ°µ Hero Section -->
      <section id="home" class="min-h-screen flex items-center justify-center section-padding relative">
        <!-- Â∑¶‰æßËÉåÊôØÂõæÁâáÂå∫Âüü -->
        <div class="hero-background-right"></div>
        
        <div class="container text-center relative z-10">
          <!-- ‰∏ªÊ†áÈ¢ò -->
          <div class="hero-title mb-16">
            <h1 class="mb-8">
              <span data-char="Âº†">Âº†</span>
              <span data-char="Ëâ∫">Ëâ∫</span>
              <span data-char="ÂÖ¥">ÂÖ¥</span>
            </h1>
            <div class="hero-subtitle">
              <span class="word" data-word="Èü≥">Èü≥</span>
              <span class="word" data-word="‰πê">‰πê</span>
              <span class="word" data-word="¬∑">¬∑</span>
              <span class="word" data-word="Ê¢¶">Ê¢¶</span>
              <span class="word" data-word="ÊÉ≥">ÊÉ≥</span>
              <span class="word" data-word="¬∑">¬∑</span>
              <span class="word" data-word="Ê∞∏">Ê∞∏</span>
              <span class="word" data-word="ÊÅí">ÊÅí</span>
            </div>
          </div>
          
          <!-- ‰ªãÁªçÂç°Áâá -->
          <!-- 3DÊ®°ÂûãÂ±ïÁ§∫Âå∫Âüü -->
          <div class="model-container max-w-4xl mx-auto p-8 mb-12 relative" ref="modelContainer">
            <div class="flex gap-8">
              <!-- Ê®°ÂûãÂ±ïÁ§∫ -->
              <div class="flex-1">
                <canvas ref="modelCanvas" class="w-full h-[600px] rounded-lg"></canvas>
              </div>
              
              <!-- ÂèÇÊï∞ÊéßÂà∂Èù¢Êùø -->
              <div class="w-80 bg-white/80 backdrop-blur rounded-lg p-6 overflow-y-auto max-h-[400px] model-params-panel">
                <h3 class="text-lg font-bold mb-4">Ê®°ÂûãÂèÇÊï∞ÊéßÂà∂</h3>
                
                <!-- Ê®°ÂûãÂèòÊç¢ -->
                <div class="param-group mb-6">
                  <h4 class="font-medium mb-2">Ê®°ÂûãÂèòÊç¢</h4>
                  <div class="space-y-2">
                    <div class="flex items-center">
                      <span class="w-20 text-sm">Áº©Êîæ:</span>
                      <input type="range" v-model="modelParams.scale" min="0.1" max="5" step="0.1" class="flex-1" @input="updateModelParams">
                      <span class="w-12 text-right text-sm">{{ modelParams.scale }}</span>
                    </div>
                    <div v-for="axis in ['X', 'Y', 'Z']" :key="axis" class="flex items-center">
                      <span class="w-20 text-sm">ÊóãËΩ¨{{ axis }}:</span>
                      <input type="range" v-model="modelParams['rotation'+axis]" min="-180" max="180" step="1" class="flex-1" @input="updateModelParams">
                      <span class="w-12 text-right text-sm">{{ modelParams['rotation'+axis] }}¬∞</span>
                    </div>
                    <div v-for="axis in ['X', 'Y', 'Z']" :key="axis" class="flex items-center">
                      <span class="w-20 text-sm">‰ΩçÁΩÆ{{ axis }}:</span>
                      <input type="range" v-model="modelParams['position'+axis]" min="-5" max="5" step="0.1" class="flex-1" @input="updateModelParams">
                      <span class="w-12 text-right text-sm">{{ modelParams['position'+axis] }}</span>
                    </div>
                  </div>
                </div>
                
                <!-- Áõ∏Êú∫ÂèÇÊï∞ -->
                <div class="param-group mb-6">
                  <h4 class="font-medium mb-2">Áõ∏Êú∫ÂèÇÊï∞</h4>
                  <div class="space-y-2">
                    <div v-for="axis in ['X', 'Y', 'Z']" :key="axis" class="flex items-center">
                      <span class="w-20 text-sm">Áõ∏Êú∫{{ axis }}:</span>
                      <input type="range" v-model="modelParams['cameraPosition'+axis]" min="-10" max="10" step="0.1" class="flex-1" @input="updateModelParams">
                      <span class="w-12 text-right text-sm">{{ modelParams['cameraPosition'+axis] }}</span>
                    </div>
                    <div class="flex items-center">
                      <span class="w-20 text-sm">ËßÜËßí:</span>
                      <input type="range" v-model="modelParams.cameraFov" min="20" max="90" step="1" class="flex-1" @input="updateModelParams">
                      <span class="w-12 text-right text-sm">{{ modelParams.cameraFov }}¬∞</span>
                    </div>
                  </div>
                </div>
                
                <!-- ÁÅØÂÖâÂèÇÊï∞ -->
                <div class="param-group mb-6">
                  <h4 class="font-medium mb-2">ÁÅØÂÖâÂèÇÊï∞</h4>
                  <div class="space-y-2">
                    <div class="flex items-center">
                      <span class="w-20 text-sm">ÁéØÂ¢ÉÂÖâ:</span>
                      <input type="range" v-model="modelParams.ambientIntensity" min="0" max="2" step="0.1" class="flex-1" @input="updateModelParams">
                      <span class="w-12 text-right text-sm">{{ modelParams.ambientIntensity }}</span>
                    </div>
                    <div class="flex items-center">
                      <span class="w-20 text-sm">Âπ≥Ë°åÂÖâ:</span>
                      <input type="range" v-model="modelParams.directionalIntensity" min="0" max="2" step="0.1" class="flex-1" @input="updateModelParams">
                      <span class="w-12 text-right text-sm">{{ modelParams.directionalIntensity }}</span>
                    </div>
                  </div>
                </div>
                
                <!-- ÊéßÂà∂ÂèÇÊï∞ -->
                <div class="param-group mb-6">
                  <h4 class="font-medium mb-2">ÊéßÂà∂ÂèÇÊï∞</h4>
                  <div class="space-y-2">
                    <div class="flex items-center">
                      <label class="flex items-center cursor-pointer">
                        <input type="checkbox" v-model="modelParams.autoRotate" class="mr-2">
                        <span class="text-sm">Ëá™Âä®ÊóãËΩ¨</span>
                      </label>
                    </div>
                    <div class="flex items-center" v-if="modelParams.autoRotate">
                      <span class="w-20 text-sm">ÊóãËΩ¨ÈÄüÂ∫¶:</span>
                      <input type="range" v-model="modelParams.autoRotateSpeed" min="0.001" max="0.02" step="0.001" class="flex-1">
                      <span class="w-12 text-right text-sm">{{ modelParams.autoRotateSpeed }}</span>
                    </div>
                  </div>
                </div>
                
                <!-- ÂØºÂÖ•ÂØºÂá∫ -->
                <div class="flex gap-4">
                  <button @click="exportParams" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm">
                    ÂØºÂá∫ÂèÇÊï∞
                  </button>
                  <label class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 cursor-pointer text-sm">
                    ÂØºÂÖ•ÂèÇÊï∞
                    <input type="file" class="hidden" accept=".json" @change="e => {
                      const file = e.target.files[0]
                      if (file) {
                        const reader = new FileReader()
                        reader.onload = () => importParams(reader.result)
                        reader.readAsText(file)
                      }
                    }">
                  </label>
                </div>
              </div>
            </div>
          </div>
          
      
          
          <!-- Èü≥È¢ëÂèØËßÜÂåñÂô® -->
          <div class="audio-visualizer">
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
          </div>
          
          <!-- 3DÊó∂Èó¥ËΩ¥ÂÖ•Âè£ÊåâÈíÆ -->
          <div class="mt-16 flex justify-center">
            <EnterButton @click="enterTimeline" />
          </div>

        </div>
      </section>
  
      <!-- ‰∏™‰∫∫ÁÆÄ‰ªã -->
      <section id="about" class="section-padding bg-gray-50 scroll-reveal min-h-screen flex items-center justify-center relative overflow-hidden">
        <!-- Ëâ∫ÊúØËÉåÊôØÊïàÊûú -->
        <div class="artistic-bg absolute inset-0">
          <div class="artistic-circle"></div>
          <!-- Âä®ÊÄÅÁ∫øÊù°ËÉåÊôØ -->
          <div class="flowing-lines">
            <div class="line-group diagonal">
              <div class="line"></div>
              <div class="line"></div>
              <div class="line"></div>
            </div>
            <div class="line-group horizontal">
              <div class="line"></div>
              <div class="line"></div>
            </div>
            <div class="line-group vertical">
              <div class="line"></div>
              <div class="line"></div>
            </div>
          </div>
          <div class="grain-overlay"></div>
        </div>

        <div class="container relative z-10">
          <div class="text-center">
            <!-- Ë£ÖÈ•∞Á∫øÊù° -->
            <div class="decorative-line mb-16">
              <span class="line"></span>
              <span class="dot"></span>
              <span class="line"></span>
            </div>
            
            <!-- ‰∏ªÊ†áÈ¢òÊâìÂ≠óÊïàÊûú -->
            <div class="title-container mb-16 relative">
              <div class="title-bg"></div>
              <h2 class="typewriter-text text-6xl md:text-8xl font-black tracking-tighter" ref="typewriterText">
                LAY ZHANG
              </h2>
            </div>
            
            <!-- ÁÆÄ‰ªãÊñáÂ≠ó -->
            <div class="max-w-2xl mx-auto px-6">
              <p class="artist-intro text-xl md:text-2xl mb-12 text-gray-600 font-light tracking-wide opacity-0 transform translate-y-8" ref="artistIntro">
              Âä™ÂäõÂä™ÂäõÂÜçÂä™ÂäõÔºÅÔºÅÔºÅ
              </p>
              
              <!-- Ë∫´‰ªΩÊ†áÁ≠æËΩÆÊí≠ -->
              <div class="identity-showcase relative opacity-0 transform translate-y-8" ref="identityShowcase">
                <div class="identity-carousel text-lg md:text-xl text-gray-500 font-light" ref="identityCarousel">
                  <span class="identity-text">ÂÖ®Ê∞ëÂà∂‰Ωú‰∫∫</span>
                  <span class="identity-text">ËàûËÄÖ</span>
                  <span class="identity-text">Ê≠åÊâã</span>
                  <span class="identity-text">Âàõ‰ΩúËÄÖ</span>
                </div>
                <!-- Ë£ÖÈ•∞ÂÖÉÁ¥† -->
                <div class="identity-decor left"></div>
                <div class="identity-decor right"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- ‰∏ãÊªëÊèêÁ§∫ -->
        <div class="scroll-hint absolute bottom-12 left-1/2 transform -translate-x-1/2 opacity-0" ref="scrollHint">
          <div class="scroll-text mb-4 text-sm tracking-widest text-gray-400 uppercase">Êé¢Á¥¢Êõ¥Â§ö</div>
          <div class="scroll-line">
            <div class="scroll-dot"></div>
          </div>
        </div>
      </section>
  
      <!-- È°µÈù¢ËøáÊ∏°ÈÅÆÁΩ© -->
      <div class="page-transition-mask"></div>
  
      <!-- Èü≥‰πê‰ΩúÂìÅ -->
      <section id="music" class="section-padding relative scroll-reveal music-album-section">

        
        <div class="container">
          <!-- Èü≥‰πêË£ÖÈ•∞ËÉåÊôØ -->
          <div class="music-decorations absolute inset-0 pointer-events-none overflow-hidden">     
            <div class="music-note absolute bottom-16 right-1/3 text-purple-300/20 text-4xl animate-bounce delay-500">‚ô´</div>
            <div class="music-note absolute top-32 right-1/4 text-cyan-400/15 text-2xl animate-pulse delay-700">‚ô™</div>
            
   
      
        
            <!-- ÊµÅÂä®ÁöÑÈü≥‰πêÁ∫øÊù° -->
            <div class="music-lines absolute top-1/4 left-0 w-full h-px bg-gradient-to-r from-transparent via-blue-400/20 to-transparent animate-pulse"></div>
            <div class="music-lines absolute bottom-1/4 left-0 w-full h-px bg-gradient-to-r from-transparent via-purple-400/15 to-transparent animate-pulse delay-500"></div>
          </div>
          
          <div class="text-center mb-16 relative z-10">
            <h2 class="section-title animate-title" data-animate="fadeInDown">Èü≥‰πê‰ΩúÂìÅ</h2>
            <p class="section-subtitle animate-subtitle" data-animate="fadeInUp" data-delay="0.2">
              Êé¢Á¥¢ÊØè‰∏ÄÈ¶ñÊ≠åÊõ≤ËÉåÂêéÁöÑÊïÖ‰∫ã‰∏éÊÉÖÊÑü
            </p>
            <div class="current-album-info mt-4 text-sm text-gray-600">
              ÂΩìÂâçÂ±ïÁ§∫Ôºö<span class="font-semibold text-blue-600">{{ currentAlbum.albumTitle }}</span> ({{ currentAlbum.year }})
            </div>
    
            
     
            
            <!-- Ë∑≥ËΩ¨ÁΩëÊòì‰∫ëÊåâÈíÆ -->
            <div class="absolute top-0 right-0">
              <a href="https://music.163.com/#/search/m/?s=%E5%BC%A0%E8%89%BA%E5%85%B4&type=1" 
                 target="_blank" 
                 class="netease-btn animate-card" 
                 data-animate="fadeInRight" 
                 data-delay="0.6">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.568 17.568c-.146.146-.338.22-.531.22s-.385-.074-.531-.22L12 13.061l-4.506 4.507c-.146.146-.338.22-.531.22s-.385-.074-.531-.22c-.293-.293-.293-.768 0-1.061L10.939 12 6.432 7.494c-.293-.293-.293-.768 0-1.061s.768-.293 1.061 0L12 10.939l4.507-4.506c.293-.293.768-.293 1.061 0s.293.768 0 1.061L13.061 12l4.507 4.507c.293.293.293.768 0 1.061z"/>
                </svg>
                <span>ÁΩëÊòì‰∫ëÈü≥‰πê</span>
              </a>
            </div>
          </div>
          
          <!-- ‰∏ìËæëÂ±ïÁ§∫Âå∫Âüü -->
          <div class="album-showcase-container relative" 
               :style="{ '--album-bg': `url(${currentAlbum.albumBackground})` }">
            <div class="album-showcase flex items-center justify-center min-h-[600px] px-8">
              <!-- Â∑¶‰æßÔºöÂúÜÂΩ¢‰∏ìËæëÂ∞ÅÈù¢ -->
              <div class="album-visual flex-shrink-0 mr-16">
                <div class="album-circle group relative">
                  <div class="w-80 h-80 rounded-full overflow-hidden shadow-2xl transform transition-all duration-500 group-hover:scale-105 group-hover:shadow-music">
                    <img :src="currentAlbum.albumCover" 
                         :alt="currentAlbum.albumTitle" 
                         class="w-full h-full object-cover transition-all duration-500 group-hover:brightness-110">
                    
                    <!-- ‰∏ìËæëÂ∞ÅÈù¢overlay -->
                    <div class="absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-black/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                    
                    <!-- Êí≠ÊîæÊåâÈíÆË¶ÜÁõñÂ±Ç -->
                    <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300">
                      <button @click="playCurrentAlbum" 
                              class="play-overlay-btn bg-white/20 backdrop-blur-sm rounded-full p-6 transform scale-90 group-hover:scale-100 transition-all duration-300">
                        <svg class="w-12 h-12 text-white" fill="currentColor" viewBox="0 0 24 24">
                          <path d="M8 5v14l11-7z"/>
                        </svg>
                      </button>
                    </div>
                  </div>
                  
                  <!-- Âπ¥‰ªΩÁéØÂΩ¢Ê†áÁ≠æ -->
                  <div class="absolute -top-4 -right-4 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-full w-16 h-16 flex items-center justify-center font-bold text-sm shadow-lg">
                    {{ currentAlbum.year }}
                  </div>
                </div>
              </div>
              
              <!-- Âè≥‰æßÔºö‰∏ìËæë‰ø°ÊÅØ -->
              <div class="album-info flex-1 max-w-2xl">
                <div class="space-y-8">
                  <!-- ‰∏ìËæëÊ†áÈ¢ò -->
                  <div class="album-header">
                    <h1 class="album-title text-5xl font-black text-gray-900 mb-4 leading-tight">
                      {{ currentAlbum.albumTitle }}
                    </h1>
                    <div class="album-meta flex items-center space-x-6 text-lg text-gray-600">
                      <span class="genre-tag px-4 py-2 bg-gray-100 rounded-full">{{ currentAlbum.genre }}</span>
                      <span class="year-tag">{{ currentAlbum.year }}</span>
                    </div>
                  </div>
                  
                  <!-- ‰∏ìËæëÊèèËø∞ -->
                  <div class="album-description">
                    <p class="text-gray-700 text-lg leading-relaxed">
                      {{ currentAlbum.description }}
                    </p>
                  </div>
                  
                  <!-- ÊàêÂ∞±/ÁâπËâ≤ -->
                  <div class="album-achievements" v-if="currentAlbum.achievements">
                    <h3 class="text-xl font-semibold text-gray-900 mb-4">‰∏ìËæëÊàêÂ∞±</h3>
                    <div class="achievements-list space-y-3">
                      <div v-for="(achievement, index) in currentAlbum.achievements" 
                           :key="index" 
                           class="achievement-item flex items-center space-x-3 text-gray-600">
                        <div class="achievement-icon w-2 h-2 bg-blue-500 rounded-full"></div>
                        <span>{{ achievement }}</span>
                      </div>
                    </div>
                  </div>
                  
                  <!-- ‰∏ìËæëÁªüËÆ° -->
                  <div class="album-stats" v-if="currentAlbum.stats">
                    <div class="stats-grid grid grid-cols-3 gap-6">
                      <div class="stat-item text-center">
                        <div class="stat-number text-2xl font-bold text-blue-600">{{ currentAlbum.stats.tracks || '12' }}</div>
                        <div class="stat-label text-sm text-gray-500">È¶ñÊ≠åÊõ≤</div>
                      </div>
                      <div class="stat-item text-center">
                        <div class="stat-number text-2xl font-bold text-purple-600">{{ currentAlbum.stats.duration || '45:30' }}</div>
                        <div class="stat-label text-sm text-gray-500">ÊÄªÊó∂Èïø</div>
                      </div>
                      <div class="stat-item text-center">
                        <div class="stat-number text-2xl font-bold text-pink-600">{{ currentAlbum.stats.plays || '2.1M' }}</div>
                        <div class="stat-label text-sm text-gray-500">Êí≠ÊîæÈáè</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- ÂØºËà™ÊåâÈíÆ -->
            <div class="album-navigation absolute bottom-8 left-1/2 transform -translate-x-1/2 flex items-center space-x-12">
              <!-- ‰∏ä‰∏Ä‰∏™‰∏ìËæë -->
              <button @click="previousAlbum" 
                      :disabled="currentAlbumIndex === 0"
                      class="nav-btn prev-btn group disabled:opacity-30 disabled:cursor-not-allowed">
                <div class="nav-btn-inner bg-white shadow-lg rounded-full p-4 transform transition-all duration-300 group-hover:scale-110 group-hover:shadow-xl">
                  <svg class="w-6 h-6 text-gray-700 group-hover:text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                  </svg>
                </div>
              </button>
              
              <!-- ‰∏ìËæëÊåáÁ§∫Âô® -->
              <div class="album-indicators flex items-center space-x-2">
                <div v-for="(album, index) in musicData" 
                     :key="album.id"
                     @click="goToAlbum(index)"
                     class="indicator w-2 h-2 rounded-full cursor-pointer transition-all duration-300"
                     :class="index === currentAlbumIndex ? 'bg-blue-500 scale-125' : 'bg-gray-300 hover:bg-gray-400'">
                </div>
              </div>
              
              <!-- ‰∏ã‰∏Ä‰∏™‰∏ìËæë -->
              <button @click="nextAlbum" 
                      :disabled="currentAlbumIndex === musicData.length - 1"
                      class="nav-btn next-btn group disabled:opacity-30 disabled:cursor-not-allowed">
                <div class="nav-btn-inner bg-white shadow-lg rounded-full p-4 transform transition-all duration-300 group-hover:scale-110 group-hover:shadow-xl">
                  <svg class="w-6 h-6 text-gray-700 group-hover:text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                  </svg>
                </div>
              </button>
            </div>
          </div>
          
     
          <!-- Èü≥‰πêÊùøÂùóLottieÂä®Áîª -->
          <div id="music-lottie" class="music-section-lottie"></div>
        </div>
      </section>
  
      <!-- ËßÜÈ¢ë‰ΩúÂìÅ -->
      <section id="videos" class="section-padding bg-gray-50 scroll-reveal">
        <div class="container">
          <div class="text-center mb-16">
            <h2 class="section-title animate-title" data-animate="fadeInDown">ËßÜÈ¢ë‰ΩúÂìÅ</h2>
            <p class="section-subtitle animate-subtitle" data-animate="fadeInUp" data-delay="0.2">
              Áî®ÂΩ±ÂÉèËÆ∞ÂΩïÈü≥‰πêÁöÑËßÜËßâË°®Ëææ
            </p>
          </div>
          
          <div class="grid grid-3 gap-8">
            <!-- ËßÜÈ¢ëÂç°Áâá -->
            <div v-for="(video, index) in videoData" :key="video.id" 
                 class="video-card animate-card" 
                 :data-animate="'slideInUp'" 
                 :data-delay="1.0 + index * 0.4">
              <div class="video-thumbnail aspect-video mb-4 relative">
                <img :src="video.thumbnail" :alt="video.title" class="w-full h-full object-cover rounded-lg">
                <div class="absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-30 transition-all duration-300 flex items-center justify-center opacity-0 hover:opacity-100 rounded-lg">
                  <button class="play-button" @click="playVideo(video)">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M8 5v14l11-7z"/>
                    </svg>
                  </button>
                </div>
                <div class="absolute bottom-3 right-3 bg-black bg-opacity-75 text-white px-2 py-1 rounded text-xs">
                  {{ video.duration }}
                </div>
                <div class="absolute top-3 left-3 bg-blue-500 text-white px-2 py-1 rounded text-xs">
                  {{ video.platform }}
                </div>
              </div>
              
              <div class="space-y-2">
                <h3 class="text-lg font-semibold text-gray-900">{{ video.title }}</h3>
                <p class="text-gray-600 text-sm">{{ video.description }}</p>
                <div class="flex items-center text-xs text-gray-400">
                  <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                  </svg>
                  {{ video.views }} Ê¨°ËßÇÁúã
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
  
      <!-- ‰ΩúËÄÖÁöÑÊäñÈü≥Á≤æÈÄâ -->
      <section id="douyin-highlights" class="section-padding scroll-reveal">
        <div class="container">
          <div class="text-center mb-16">
            <h2 class="section-title animate-title" data-animate="fadeInDown">‰ΩúËÄÖÁöÑÊäñÈü≥Á≤æÈÄâ</h2>
            <p class="section-subtitle animate-subtitle" data-animate="fadeInUp" data-delay="0.2">
              Ëé∑Âèñ‰ΩúËÄÖÊúÄÊñ∞ÊäñÈü≥ÈúÄË¶ÅÂêéÁ´ØAPIÂèäÊéàÊùÉÔºåÊâÄ‰ª•Âè™ËÉΩÁ≤æÈÄâ‰∫Ü
            </p>
            <!-- ËäÇÊãçÁÇπË£ÖÈ•∞ -->
            <div class="rhythm-dots animate-dots" data-animate="fadeInUp" data-delay="0.4">
              <div class="rhythm-dot"></div>
              <div class="rhythm-dot"></div>
              <div class="rhythm-dot"></div>
              <div class="rhythm-dot"></div>
              <div class="rhythm-dot"></div>
            </div>
          </div>
          
          <div class="grid grid-2 gap-8">
            <!-- ÊäñÈü≥ËßÜÈ¢ë -->
            <div v-for="(video, index) in douyinData" :key="video.id" 
                 class="douyin-card animate-card" 
                 :data-animate="'rotateInUpLeft'" 
                 :data-delay="1.2 + index * 0.6">
              <div class="douyin-video aspect-[9/16] max-w-sm mx-auto relative">
                <img :src="video.thumbnail" :alt="video.title" class="w-full h-full object-cover rounded-xl">
                <div class="absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-30 transition-all duration-300 flex items-center justify-center opacity-0 hover:opacity-100 rounded-xl">
                  <button class="play-button" @click="playDouyinVideo(video)">
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M8 5v14l11-7z"/>
                    </svg>
                  </button>
                </div>
                
                <!-- ÊäñÈü≥Ê†∑ÂºèÁöÑUIÂÖÉÁ¥† -->
                <div class="absolute bottom-4 left-4 right-4">
                  <div class="flex items-end justify-between">
                    <div class="flex-1">
                      <h3 class="text-white font-semibold text-sm mb-2">{{ video.title }}</h3>
                      <p class="text-white text-xs opacity-90">{{ video.description }}</p>
                      <div class="flex items-center mt-2 text-xs text-white opacity-75">
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 24 24">
                          <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                        </svg>
                        {{ video.likes }}
                      </div>
                    </div>
                    
                    <div class="flex flex-col items-center space-y-3 ml-4">
                      <div class="w-10 h-10 rounded-full bg-white bg-opacity-20 backdrop-blur-sm flex items-center justify-center">
                        <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
                          <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92S19.61 16.08 18 16.08z"/>
                        </svg>
                      </div>
                      <div class="w-10 h-10 rounded-full bg-white bg-opacity-20 backdrop-blur-sm flex items-center justify-center">
                        <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
                          <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92S19.61 16.08 18 16.08z"/>
                        </svg>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Êó∂ÈïøÊòæÁ§∫ -->
                <div class="absolute top-3 right-3 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-xs">
                  {{ video.duration }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
  
      <!-- 3D ‰∫§‰∫íÊó∂Èó¥ËΩ¥ -->
      <section id="timeline" class="section-padding min-h-screen bg-gray-50 scroll-reveal">
        <div class="container">
          <div class="text-center mb-16">
            <h2 class="section-title animate-title" data-animate="fadeInDown">Èü≥‰πêÊó∂Èó¥ËΩ¥</h2>
            <p class="section-subtitle max-w-3xl mx-auto animate-subtitle" data-animate="fadeInUp" data-delay="0.2">
              Ê≤âÊµ∏Âºè 3D Èü≥‰πêÊó∂ÂÖâÈößÈÅìÔºåÊÇ¨ÂÅúËäÇÁÇπÊü•ÁúãÈ¢ÑËßàÔºåÁÇπÂáªËß¶ÂèëÈü≥‰πêËäÇÊãçÂä®Êïà„ÄÇ
              ÊØè‰∏ÄÊ¨°ÁÇπÂáªÈÉΩ‰º¥ÈöèÁùÄ‰∏ìÂ±ûÁöÑÈü≥Ê≥¢Êâ©Êï£‰∏éÊóãÂæãÂÖ±È∏£ÔºåËÆ©Êó∂ÂÖâÂú®Èü≥Á¨¶‰∏≠ÊµÅÊ∑å„ÄÇ
            </p>
            <!-- ËäÇÊãçÁÇπË£ÖÈ•∞ -->
            <div class="rhythm-dots animate-dots" data-animate="fadeInUp" data-delay="0.4">
              <div class="rhythm-dot"></div>
              <div class="rhythm-dot"></div>
              <div class="rhythm-dot"></div>
              <div class="rhythm-dot"></div>
              <div class="rhythm-dot"></div>
            </div>
          </div>
        </div>
        
        <!-- 3D Êó∂Èó¥ËΩ¥ÂÆπÂô® -->
        <div id="timeline-3d" class="w-full h-96 md:h-screen animate-timeline" data-animate="fadeIn" data-delay="0.6"></div>
        
        <!-- Êó∂Èó¥ËΩ¥ÊéßÂà∂Âô® -->
        
      </section>
  
      <!-- ÁßªÂä®Á´ØËèúÂçï -->
      <div id="mobile-menu" class="fixed inset-0 z-50 hidden md:hidden">
        <div class="absolute inset-0 bg-black bg-opacity-50" @click="closeMobileMenu"></div>
        <div class="absolute right-0 top-0 h-full w-80 bg-white shadow-xl p-6">
          <div class="flex justify-between items-center mb-8">
            <h3 class="text-xl font-bold text-gray-900">ËèúÂçï</h3>
            <button @click="closeMobileMenu" class="control-button" title="ÂÖ≥Èó≠ËèúÂçï">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
          <nav class="space-y-6">
            <a href="#home" class="block text-lg text-gray-700 hover:text-blue-500" @click="closeMobileMenu">È¶ñÈ°µ</a>
            <a href="#about" class="block text-lg text-gray-700 hover:text-blue-500" @click="closeMobileMenu">ÁÆÄ‰ªã</a>
            <a href="#music" class="block text-lg text-gray-700 hover:text-blue-500" @click="closeMobileMenu">Èü≥‰πê</a>
            <a href="#videos" class="block text-lg text-gray-700 hover:text-blue-500" @click="closeMobileMenu">ËßÜÈ¢ë</a>
            <a href="#timeline" class="block text-lg text-gray-700 hover:text-blue-500" @click="closeMobileMenu">Êó∂Èó¥ËΩ¥</a>
          </nav>
        </div>
      </div>
      <!-- È°µÈù¢Â∫ïÈÉ®ÊèíÂÖ•ÊåâÈíÆ -->
      <button
        class="mt-10 px-6 py-3 rounded-full bg-gradient-to-r from-pink-500 to-purple-600 text-white
               hover:scale-105 transition-transform"
        @click="router.push({ name: 'Timeline' })"
      >
        ËøõÂÖ• 3D Êó∂Èó¥ËΩ¥
      </button>
    </div>
    
  
  
</template>
  
  <script setup lang="ts">
import EnterButton from '@/components/EnterButton.vue'
import VideoTransition from '@/components/VideoTransition.vue'
import { defaultModelParams, douyinData, musicData, videoData } from '@/database/index.js'
import '@/styles/index.css'
import * as THREE from 'three'
import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js'
import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js'
import { nextTick, onBeforeUnmount, onMounted, onUnmounted, ref } from 'vue'
import { useRouter } from 'vue-router'
  
  const router = useRouter()
  
  // ÂìçÂ∫îÂºèÊï∞ÊçÆ
  const hoverCount = ref(0)
  const clickCount = ref(0)
  const animationStatus = ref('ÂàùÂßãÂåñ‰∏≠...')
  const currentPlayingId = ref(null)
  const isLoading = ref(false)
  const failedAlbumId = ref(null)
  
  // È´òËÆæËÆ°ÊÑüÈº†Ê†á‰∫§‰∫íÁõ∏ÂÖ≥

  
  // ËΩ¨Âú∫Áõ∏ÂÖ≥Áä∂ÊÄÅ
  const showVideoTransition = ref(false)
  const videoTransitionRef = ref<InstanceType<typeof VideoTransition>>()
  
  // ‰∏ìËæëÂ±ïÁ§∫Áõ∏ÂÖ≥Áä∂ÊÄÅ
  const currentAlbumIndex = ref(0)
  const isPlaying = ref(false)
  const progressPercent = ref(0)
  const currentTime = ref('0:00')
  const totalTime = ref('3:45')
  
  // ÈùôÊÄÅËµÑÊ∫ê
  const artistImage = '/artist-journey/assets/background.jpg'
  
  // Lottie Âä®ÁîªÁõ∏ÂÖ≥
  let glassCardLottieAnimation = null
  let globalClickLottieAnimation = null
  let particlesCanvas = null
  let animationId = null
  let hoverTimer = null
  
  // Èü≥‰πêÊï∞ÊçÆ‰ªéÂ§ñÈÉ®Êñá‰ª∂ÂØºÂÖ•
  
  // ËßÜÈ¢ëÊï∞ÊçÆÂíåÊäñÈü≥Êï∞ÊçÆ‰ªéÂ§ñÈÉ®Êñá‰ª∂ÂØºÂÖ•
  
  // ËÆ°ÁÆóÂ±ûÊÄßÔºöÂΩìÂâç‰∏ìËæë
  const currentAlbum = ref(musicData[0]) // Áõ¥Êé•‰ΩøÁî® ref ÂåÖË£ÖÂΩìÂâç‰∏ìËæë
  
  // ‰∏ìËæëÂØºËà™ÊñπÊ≥ï
  const previousAlbum = () => {
    if (currentAlbumIndex.value > 0) {
      currentAlbumIndex.value--
      currentAlbum.value = musicData[currentAlbumIndex.value]
      updateAlbumBackground()
    }
  }
  
  const nextAlbum = () => {
    if (currentAlbumIndex.value < musicData.length - 1) {
      currentAlbumIndex.value++
      currentAlbum.value = musicData[currentAlbumIndex.value]
      updateAlbumBackground()
    }
  }
  
  const goToAlbum = (index) => {
    currentAlbumIndex.value = index
    currentAlbum.value = musicData[index]
    updateAlbumBackground()
  }

  // ËøõÂÖ•3DÊó∂Èó¥ËΩ¥È¶ñÈ°µ
  const enterTimeline = () => {
    console.log('üé¨ ÂêØÂä®ËßÜÈ¢ëËΩ¨Âú∫Âà∞ 3D Êó∂Èó¥ËΩ¥')
    
    // ÊòæÁ§∫ËßÜÈ¢ëËΩ¨Âú∫ÁªÑ‰ª∂
    showVideoTransition.value = true
    
    // Á≠âÂæÖ‰∏ã‰∏Ä‰∏™Ê∏≤ÊüìÂë®ÊúüÔºåÁÑ∂ÂêéÂêØÂä®ËΩ¨Âú∫
    nextTick(() => {
      if (videoTransitionRef.value) {
        videoTransitionRef.value.startTransition()
      } else {
        console.warn('‚ö†Ô∏è ËßÜÈ¢ëËΩ¨Âú∫ÁªÑ‰ª∂Êú™ÊâæÂà∞Ôºå‰ΩøÁî®Áõ¥Êé•Ë∑≥ËΩ¨')
        router.push('/landing-3d')
      }
    })
  }
  
  // ÂàáÊç¢Âà∞ÁßªÂä®Á´Ø
  const switchToMobile = () => {
    router.push('/mobile')
  }
  
  // ËΩ¨Âú∫ÂºÄÂßã‰∫ã‰ª∂
  const onTransitionStarted = () => {
    console.log('üé¨ ËßÜÈ¢ëËΩ¨Âú∫Â∑≤ÂºÄÂßã')
    // ÂèØ‰ª•Âú®ËøôÈáåÊ∑ªÂä†‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑÊïàÊûúÔºåÊØîÂ¶ÇÂÅúÊ≠¢ËÉåÊôØÈü≥‰πêÁ≠â
  }
  
  // ËΩ¨Âú∫ÁªìÊùü‰∫ã‰ª∂
  const onTransitionEnded = () => {
    console.log('‚úÖ ËßÜÈ¢ëËΩ¨Âú∫Â∑≤ÂÆåÊàê')
    showVideoTransition.value = false
  }
  
  // ËΩ¨Âú∫ÈîôËØØ‰∫ã‰ª∂
  const onTransitionError = (error: Event) => {
    console.error('‚ùå ËßÜÈ¢ëËΩ¨Âú∫Âá∫Èîô:', error)
    console.warn('ËΩ¨Âú∫ËßÜÈ¢ëÂä†ËΩΩÂ§±Ë¥•ÔºåÂ∞ÜÁõ¥Êé•Ë∑≥ËΩ¨')
    
    // ÂèëÁîüÈîôËØØÊó∂Áõ¥Êé•Ë∑≥ËΩ¨
    setTimeout(() => {
      router.push('/landing-3d')
      showVideoTransition.value = false
    }, 1000)
  }
  
  // Êõ¥Êñ∞‰∏ìËæëËÉåÊôØ
  const updateAlbumBackground = () => {
    const container = document.querySelector('.album-showcase-container')
    if (container && currentAlbum.value.albumBackground) {
      container.style.setProperty('--album-bg', `url(${currentAlbum.value.albumBackground})`)
    }
  }
  
  // Êí≠ÊîæÂô®ÊñπÊ≥ï
  const togglePlay = () => {
    isPlaying.value = !isPlaying.value
    if (isPlaying.value) {
      startProgress()
    } else {
      stopProgress()
    }
  }
  
  const playCurrentAlbum = () => {
    isPlaying.value = true
    startProgress()
  }
  
  // Ê®°ÊãüÊí≠ÊîæËøõÂ∫¶
  let progressInterval = null
  
  const startProgress = () => {
    if (progressInterval) clearInterval(progressInterval)
    progressInterval = setInterval(() => {
      if (progressPercent.value < 100) {
        progressPercent.value += 0.5
        updateCurrentTime()
      } else {
        progressPercent.value = 0
        updateCurrentTime()
      }
    }, 200)
  }
  
  const stopProgress = () => {
    if (progressInterval) {
      clearInterval(progressInterval)
      progressInterval = null
    }
  }
  
  const updateCurrentTime = () => {
    const totalSeconds = 225 // 3:45 ÁöÑÊÄªÁßíÊï∞
    const currentSeconds = Math.floor((progressPercent.value / 100) * totalSeconds)
    const minutes = Math.floor(currentSeconds / 60)
    const seconds = currentSeconds % 60
    currentTime.value = `${minutes}:${seconds.toString().padStart(2, '0')}`
  }
  
  // ÂàùÂßãÂåñLottieÂä®Áîª
  const initGlassCardLottie = () => {
    const container = document.getElementById('lottie-container')
    if (container && window.lottie) {
      try {
    
        
        glassCardLottieAnimation = window.lottie.loadAnimation({
          container: container,
          renderer: 'svg',
          loop: true,
          autoplay: false,
          path: '/lottie/Animation - 1749135116565(1).json'
        })
        
        glassCardLottieAnimation.addEventListener('data_ready', () => {
          
          animationStatus.value = 'Â∑≤Âä†ËΩΩÔºåÊÇ¨ÊµÆ2ÁßíËß¶Âèë'
        })
        
        glassCardLottieAnimation.addEventListener('data_failed', () => {
          console.error('ÁéªÁíÉÂç°ÁâáËæπÊ°ÜLottieÂä®ÁîªÊï∞ÊçÆÂä†ËΩΩÂ§±Ë¥•')
          animationStatus.value = 'Âä†ËΩΩÂ§±Ë¥•'
          
          // Â¶ÇÊûúLottieÂä†ËΩΩÂ§±Ë¥•Ôºå‰ΩøÁî®CSSÂä®Áîª‰Ωú‰∏∫Â§áÁî®
          const card = document.getElementById('lottie-glass-card')
          if (card) {
            card.classList.add('fallback-animation')
          }
        })
        
      } catch (error) {
        console.error('ÁéªÁíÉÂç°ÁâáËæπÊ°ÜLottieÂä®ÁîªÂàùÂßãÂåñÈîôËØØ:', error)
        animationStatus.value = 'ÂàùÂßãÂåñÂ§±Ë¥•'
      }
    } else {
      console.warn('LottieÂ∫ìÊú™Âä†ËΩΩÊàñÂÆπÂô®‰∏çÂ≠òÂú®Ôºå‰ΩøÁî®CSSÂä®ÁîªÂ§áÁî®ÊñπÊ°à')
      animationStatus.value = 'CSSÂä®ÁîªÂ§áÁî®'
    }
  }
  
  // ÂàùÂßãÂåñÂÖ®Â±ÄÁÇπÂáªLottieÂä®Áîª
  const initGlobalClickLottie = () => {
    // ÂàõÂª∫ÂÖ®Â±ÄÁÇπÂáªÂä®ÁîªÂÆπÂô®
    const existingContainer = document.getElementById('global-click-lottie')
    if (existingContainer) {
      existingContainer.remove()
    }
    
    const container = document.createElement('div')
    container.id = 'global-click-lottie'
    container.style.cssText = `
      position: fixed;
      width: 200px;
      height: 200px;
      pointer-events: none;
      z-index: 9999;
      opacity: 0;
      transition: opacity 0.3s ease;
    `
    document.body.appendChild(container)
    
    if (window.lottie) {
      try {
  
        
        globalClickLottieAnimation = window.lottie.loadAnimation({
          container: container,
          renderer: 'svg',
          loop: false,
          autoplay: false,
          path: '/lottie/Animation - 1749135273451.json'
        })
        
                  globalClickLottieAnimation.addEventListener('data_ready', () => {
            // ÂÖ®Â±ÄÁÇπÂáªÂä®ÁîªÊï∞ÊçÆÂä†ËΩΩÂÆåÊàê
          })
        
        globalClickLottieAnimation.addEventListener('complete', () => {
          container.style.opacity = '0'
        })
        
      } catch (error) {
        console.error('ÂÖ®Â±ÄÁÇπÂáªLottieÂä®ÁîªÂàùÂßãÂåñÈîôËØØ:', error)
      }
    }
  }
  
  // ÂàùÂßãÂåñÊ†áÈ¢òLottieÂä®Áîª
  const initTitleLotties = () => {
    const lottieIds = ['title-lottie-1', 'title-lottie-2', 'title-lottie-3']
    
    lottieIds.forEach((id, index) => {
      const container = document.getElementById(id)
      if (container && window.lottie) {
        try {
  
          
          window.lottie.loadAnimation({
            container: container,
            renderer: 'svg',
            loop: true,
            autoplay: true,
            path: '/lottie/Animation - 1749135116565(1).json'
          })
          
        } catch (error) {
          console.error(`Ê†áÈ¢òLottieÂä®ÁîªÂàùÂßãÂåñÈîôËØØ (${id}):`, error)
        }
      }
    })
  }
  
  // ÂÖ®Â±ÄÁÇπÂáª‰∫ã‰ª∂Â§ÑÁêÜ
  const handleGlobalClick = (event) => {
    if (globalClickLottieAnimation && event.target) {
      const container = document.getElementById('global-click-lottie')
      if (container) {
        // ËÆæÁΩÆÂä®Áîª‰ΩçÁΩÆ‰∏∫ÁÇπÂáª‰ΩçÁΩÆ
        const x = event.clientX - 100 // ÂáèÂéªÂä®ÁîªÂÆΩÂ∫¶ÁöÑ‰∏ÄÂçä
        const y = event.clientY - 100 // ÂáèÂéªÂä®ÁîªÈ´òÂ∫¶ÁöÑ‰∏ÄÂçä
        
        container.style.left = `${x}px`
        container.style.top = `${y}px`
        container.style.opacity = '0.3' // Èôç‰ΩéÈÄèÊòéÂ∫¶Ôºå‰ªé1ÈôçÂà∞0.3
        
        // Êí≠ÊîæÂä®Áîª
        globalClickLottieAnimation.goToAndPlay(0)
        
    
      }
    }
  }
  
  // ‰∫ã‰ª∂Â§ÑÁêÜÂáΩÊï∞
  const onCardHover = () => {

    
    const card = document.getElementById('lottie-glass-card')
    if (card) {
      card.style.transform = 'translateY(-5px)'
      card.style.boxShadow = '0 25px 50px -12px rgba(0, 0, 0, 0.15)'
    }
    
    // Ê∏ÖÈô§‰πãÂâçÁöÑÂÆöÊó∂Âô®
    if (hoverTimer) {
      clearTimeout(hoverTimer)
    }
    
    // ËÆæÁΩÆ2ÁßíÂª∂ËøüËß¶Âèë
    hoverTimer = setTimeout(() => {
      hoverCount.value++
      
      
      if (glassCardLottieAnimation) {
        glassCardLottieAnimation.play()
        animationStatus.value = 'Êí≠Êîæ‰∏≠'
        
        // Ê∑ªÂä†ËæπÊ°ÜÂèëÂÖâÊïàÊûú
        const card = document.getElementById('lottie-glass-card')
        if (card) {
          card.style.boxShadow = '0 25px 50px -12px rgba(59, 130, 246, 0.3), 0 0 0 1px rgba(59, 130, 246, 0.1)'
        }
      }
    }, 2000) // 2ÁßíÂª∂Ëøü
  }
  
  const onCardLeave = () => {

    
    // Ê∏ÖÈô§ÊÇ¨ÊµÆÂÆöÊó∂Âô®
    if (hoverTimer) {
      clearTimeout(hoverTimer)
      hoverTimer = null
    }
    
    const card = document.getElementById('lottie-glass-card')
    if (card) {
      card.style.transform = 'translateY(0)'
      card.style.boxShadow = '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)'
    }
    
    if (glassCardLottieAnimation) {
      glassCardLottieAnimation.pause()
      animationStatus.value = 'Â∑≤ÊöÇÂÅú'
    }
  }
  
  const onCardClick = () => {
    clickCount.value++
    
    
    const card = document.getElementById('lottie-glass-card')
    if (card) {
      card.style.transform = 'translateY(-20px) scale(1.05)'
      card.style.boxShadow = '0 25px 50px -12px rgba(236, 72, 153, 0.3)'
      
      setTimeout(() => {
        card.style.transform = 'translateY(0) scale(1)'
        card.style.boxShadow = '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)'
      }, 300)
    }
    
    // ÁÇπÂáªÊó∂Á´ãÂç≥Êí≠ÊîæÂä®Áîª
    if (glassCardLottieAnimation) {
      glassCardLottieAnimation.goToAndPlay(0)
      animationStatus.value = 'ÁÇπÂáªÊí≠Êîæ‰∏≠'
    }
  }
  
  const scrollToSection = (sectionId) => {
    const section = document.getElementById(sectionId)
    if (section) {
      section.scrollIntoView({ behavior: 'smooth' })
    }
  }
  
  const playMusic = () => {

    showNotification('‚ô™ ÂºÄÂßãÊí≠ÊîæÈü≥‰πê')
  }
  
  const playAlbum = (album) => {
    
    showNotification(`üéµ Ê≠£Âú®Êí≠Êîæ: ${album.albumTitle}`)
  }
  
  const startPlaying = async (album) => {
    if (isLoading.value) return
    
    isLoading.value = true
    failedAlbumId.value = null
    
    try {
      // Ê®°ÊãüËµÑÊ∫êÂä†ËΩΩÁ≠âÂæÖ
      await new Promise(resolve => setTimeout(resolve, 1500))
      
      // Ê®°Êãü20%ÁöÑÂ§±Ë¥•Áéá
      if (Math.random() < 0.2) {
        throw new Error('ËµÑÊ∫êÂä†ËΩΩÂ§±Ë¥•')
      }
      
      currentPlayingId.value = album.id
      
    } catch (error) {
      console.error('Êí≠ÊîæÂ§±Ë¥•:', error)
      failedAlbumId.value = album.id
    } finally {
      isLoading.value = false
    }
  }
  
  const stopPlaying = () => {
    currentPlayingId.value = null
    
  }
  
  const retryPlaying = (album) => {
    failedAlbumId.value = null
    startPlaying(album)
  }
  
  const playVideo = (video) => {
    
    showNotification(`üì∫ Ê≠£Âú®Êí≠Êîæ: ${video.title}`)
  }
  
  const playDouyinVideo = (video) => {
    
    showNotification(`üé¨ Ê≠£Âú®Êí≠Êîæ: ${video.title}`)
  }
  
  const resetTimeline = () => {
    const timelineContainer = document.getElementById('timeline-3d')
    if (timelineContainer) {
      timelineContainer.scrollIntoView({ 
        behavior: 'smooth',
        block: 'start' 
      })
    }
    showNotification('üîÑ Êó∂Èó¥ËΩ¥Â∑≤ÈáçÁΩÆÂà∞ÂàùÂßãÁä∂ÊÄÅ')
  }
  
  const closeMobileMenu = () => {
    const mobileMenu = document.getElementById('mobile-menu')
    if (mobileMenu) {
      mobileMenu.classList.add('hidden')
    }
  }
  

  
  const showNotification = (message) => {
    const notification = document.createElement('div')
    notification.className = 'fixed top-20 right-6 z-50 p-4 rounded-xl shadow-lg transform translate-x-full transition-all duration-300 success-message'
    notification.textContent = message
    
    document.body.appendChild(notification)
    
    setTimeout(() => {
      notification.style.transform = 'translateX(0)'
    }, 100)
    
    setTimeout(() => {
      notification.style.transform = 'translateX(100%)'
      setTimeout(() => {
        notification.remove()
      }, 300)
    }, 3000)
  }
  

  
  // ËÆæÁΩÆ‰∫ã‰ª∂ÁõëÂê¨Âô®
  const setupEventListeners = () => {
    const menuToggle = document.getElementById('menu-toggle')
    const mobileMenu = document.getElementById('mobile-menu')
    
    if (menuToggle && mobileMenu) {
      menuToggle.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden')
      })
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault()
        const targetId = link.getAttribute('href').substring(1)
        scrollToSection(targetId)
      })
    })
    
    // Ê∑ªÂä†ÂÖ®Â±ÄÁÇπÂáª‰∫ã‰ª∂ÁõëÂê¨Âô®
    document.addEventListener('click', handleGlobalClick)
  }
  
  // ÂàùÂßãÂåñÊªöÂä®Âä®ÁîªËßÇÂØüÂô®
  const initScrollAnimations = () => {
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    }
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const element = entry.target
          const animationType = element.dataset.animate
          const delay = parseFloat(element.dataset.delay || 0) * 1000
          
          setTimeout(() => {
            element.classList.add('animate-visible')
            
            // ÁâπÊÆäÂ§ÑÁêÜÊñáÂ≠óÊéâËêΩÊïàÊûú
            if (animationType === 'fadeInDown' && element.classList.contains('animate-title')) {
              element.style.animation = 'titleDrop 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards'
            }
            
            // ÁâπÊÆäÂ§ÑÁêÜÂç°ÁâáÂºπÂÖ•ÊïàÊûú
            if (element.classList.contains('animate-card')) {
              element.style.animation = `${animationType} 1.0s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards`
            }
            
            // Ê†áÁ≠æÂºπË∑≥ÊïàÊûú
            if (element.classList.contains('animate-badge')) {
              element.style.animation = 'bounceIn 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards'
            }
            
            // ÊñáÂ≠óÂºπË∑≥ÊïàÊûú
            if (element.classList.contains('animate-bounce-text')) {
              element.style.animation = `${animationType} 1.0s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards`
            }
            
          }, delay)
          
          observer.unobserve(element)
        }
      })
    }, observerOptions)
    
    // ËßÇÂØüÊâÄÊúâÂ∏¶Âä®ÁîªÁöÑÂÖÉÁ¥†
    const animateElements = document.querySelectorAll('[data-animate]')
    animateElements.forEach(el => {
      el.classList.add('animate-hidden')
      observer.observe(el)
    })
  }
  
  // Ê∑ªÂä†Èº†Ê†áÊªöËΩÆÂä®ÊÄÅÊïàÊûú
  const addScrollDynamics = () => {
    let ticking = false
    
    const updateScrollEffect = () => {
      const scrolled = window.pageYOffset
      const rate = scrolled * -0.5
      
      // ËÉåÊôØÁ≤íÂ≠êÂä®ÊÄÅÊïàÊûú
      const particlesCanvas = document.getElementById('particles-canvas')
      if (particlesCanvas) {
        particlesCanvas.style.transform = `translate3d(0, ${rate}px, 0)`
      }
      
      // ÊµÆÂä®ÂÖÉÁ¥†Âä®ÊÄÅÊïàÊûú
      const floatingElements = document.querySelectorAll('.floating-card, .music-section-lottie')
      floatingElements.forEach((element, index) => {
        const speed = 0.5 + index * 0.1
        element.style.transform = `translateY(${scrolled * speed * 0.1}px)`
      })
      
      ticking = false
    }
    
    const requestTick = () => {
      if (!ticking) {
        requestAnimationFrame(updateScrollEffect)
        ticking = true
      }
    }
    
    window.addEventListener('scroll', requestTick)
  }
  
  // Á≤íÂ≠êÁ≥ªÁªüÊ∏ÖÁêÜÂáΩÊï∞ÂíåÊé•Âè£
  let particlesCleanup = null
  let particlesInterface = null
  

  
  // ÂàùÂßãÂåñÂ∫îÁî®
  const initApp = async () => {
    try {
      setupEventListeners()
      
      // ÂàùÂßãÂåñÁ≤íÂ≠êËÉåÊôØ
      setTimeout(() => {
        particlesInterface = initParticlesBackground()
        particlesCleanup = particlesInterface.cleanup
      }, 100)
      

      
      // ÂàùÂßãÂåñLottieÂä®Áîª
      setTimeout(() => {
        initGlassCardLottie()
      }, 500)
      
      // ÂàùÂßãÂåñÂÖ®Â±ÄÁÇπÂáªLottieÂä®Áîª
      setTimeout(() => {
        initGlobalClickLottie()
      }, 800)
      
      // ÂàùÂßãÂåñÊ†áÈ¢òLottieÂä®Áîª
      setTimeout(() => {
        initTitleLotties()
      }, 1000)
      
      // ÂàùÂßãÂåñÊªöÂä®Âä®Áîª
      setTimeout(() => {
        initScrollAnimations()
      }, 1000)
      
      // Ê∑ªÂä†ÊªöÂä®Âä®ÊÄÅÊïàÊûú
      setTimeout(() => {
        addScrollDynamics()
      }, 1200)
      
      // ÂàùÂßãÂåñÈü≥È¢ëÂèØËßÜÂåñÂô®Âä®Áîª
      setTimeout(() => {
        const audioVisualizerBars = document.querySelectorAll('.audio-bar')
        audioVisualizerBars.forEach((bar, index) => {
          bar.style.animationDelay = `${index * 0.1}s`
        })
      }, 1000)
      
      // ÂàùÂßãÂåñËäÇÊãçÁÇπÂä®Áîª
      setTimeout(() => {
        const rhythmDots = document.querySelectorAll('.rhythm-dot')
        rhythmDots.forEach((dot, index) => {
          dot.style.animationDelay = `${index * 0.2}s`
        })
      }, 1200)
      
    
      
    } catch (error) {
      console.error('ÂàùÂßãÂåñÂ§±Ë¥•:', error)
    }
  }
  
  onMounted(() => {
    // ËÆæÂ§áÊ£ÄÊµãÂíåËá™Âä®Ë∑≥ËΩ¨
    import('@/utils/deviceDetector').then(({ isMobileDevice }) => {
      const isMobile = isMobileDevice()
      
      // Ê£ÄÊü•URLÂèÇÊï∞ÔºåÂ¶ÇÊûúÊúâforcePCÊ†áËÆ∞ÔºåÂàô‰∏çËá™Âä®Ë∑≥ËΩ¨
      const urlParams = new URLSearchParams(window.location.search)
      const forcePC = urlParams.get('forcePC') === 'true'
      
      if (isMobile && !forcePC) {
        // ÁßªÂä®ËÆæÂ§áË∑≥ËΩ¨Âà∞ÁßªÂä®Á´ØÈ°µÈù¢Ôºå‰ΩÜÊ∑ªÂä†Êù•Ê∫êÊ†áËÆ∞
        console.log('Ê£ÄÊµãÂà∞ÁßªÂä®ËÆæÂ§áÔºåË∑≥ËΩ¨Âà∞ÁßªÂä®Á´ØÈ°µÈù¢')
        router.replace('/mobile?fromPC=true')
        return
      } else {
        console.log('Ê£ÄÊµãÂà∞PCËÆæÂ§áÊàñÂº∫Âà∂PCÊ®°ÂºèÔºåÁªßÁª≠Âä†ËΩΩPCÁ´ØÈ°µÈù¢')
      }
      
      // Âè™ÊúâPCÁ´ØÊâçÁªßÁª≠ÂàùÂßãÂåñ
      initApp()
      // ÂàùÂßãÂåñ‰∏ìËæëËÉåÊôØ
      setTimeout(() => {
        updateAlbumBackground()
      }, 100)
    }).catch(error => {
      console.error('ËÆæÂ§áÊ£ÄÊµãÂ§±Ë¥•:', error)
      // Ê£ÄÊµãÂ§±Ë¥•Êó∂ÈªòËÆ§ÁªßÁª≠PCÁ´ØÈÄªËæë
      initApp()
      setTimeout(() => {
        updateAlbumBackground()
      }, 100)
    })
  })
  
  onUnmounted(() => {
    if (glassCardLottieAnimation) {
      glassCardLottieAnimation.destroy()
    }
    if (globalClickLottieAnimation) {
      globalClickLottieAnimation.destroy()
    }
    if (animationId) {
      cancelAnimationFrame(animationId)
    }
    if (hoverTimer) {
      clearTimeout(hoverTimer)
    }
    
    // Ê∏ÖÁêÜÊí≠ÊîæÂô®ÂÆöÊó∂Âô®
    if (progressInterval) {
      clearInterval(progressInterval)
    }
    
    // Ê∏ÖÁêÜÁ≤íÂ≠êÁ≥ªÁªü
    if (particlesInterface && particlesInterface.cleanup) {
      particlesInterface.cleanup()
    }
    
    // ÁßªÈô§ÂÖ®Â±ÄÁÇπÂáª‰∫ã‰ª∂ÁõëÂê¨Âô®
    document.removeEventListener('click', handleGlobalClick)
    
    // ÁßªÈô§ÂÖ®Â±ÄÁÇπÂáªÂä®ÁîªÂÆπÂô®
    const container = document.getElementById('global-click-lottie')
    if (container) {
      container.remove()
    }
  })
  
  // Á≤íÂ≠êËÉåÊôØÁ≥ªÁªü
  const initParticlesBackground = () => {
    const canvas = document.getElementById('particles-canvas')
    if (!canvas) return
    
    const ctx = canvas.getContext('2d')
    canvas.width = window.innerWidth
    canvas.height = window.innerHeight
    
    const particles = []
    const maxParticles = 800 // Èôç‰ΩéÁ≤íÂ≠ê‰∏äÈôê‰ª•ÊèêÂçáÊÄßËÉΩ
    const baseParticleCount = 60 // ÂáèÂ∞ëÂü∫Á°ÄÁ≤íÂ≠êÊï∞Èáè
    const rightAreaBonus = 30 // ÂáèÂ∞ëÂè≥‰æßÂå∫ÂüüÈ¢ùÂ§ñÁ≤íÂ≠êÊï∞Èáè
    let mouseParticles = [] // Èº†Ê†á‰∫§‰∫íÁîüÊàêÁöÑÁ≤íÂ≠ê
    let particlesPerClick = 15 // ÂáèÂ∞ëÊØèÊ¨°ÁÇπÂáªÁîüÊàêÁöÑÁ≤íÂ≠êÊï∞Èáè
    
    // ÂàõÂª∫Âü∫Á°ÄÁ≤íÂ≠ê
    for (let i = 0; i < baseParticleCount; i++) {
      particles.push(createParticle())
    }
    
    // Âú®Âè≥‰æßÂå∫ÂüüÂàõÂª∫Êõ¥Â§öÁ≤íÂ≠ê
    for (let i = 0; i < rightAreaBonus; i++) {
      particles.push(createParticle(canvas.width * 0.5, canvas.width)) // Âè≥ÂçäÈÉ®ÂàÜ
    }
    
    // ÂàõÂª∫Á≤íÂ≠êÁöÑÂáΩÊï∞
    function createParticle(minX = 0, maxX = null) {
      const actualMaxX = maxX || canvas.width
      return {
        x: Math.random() * (actualMaxX - minX) + minX,
        y: Math.random() * canvas.height,
        vx: (Math.random() - 0.5) * 0.8,
        vy: (Math.random() - 0.5) * 0.8,
        radius: Math.random() * 2.5 + 1,
        alpha: Math.random() * 0.6 + 0.3,
        hue: Math.random() * 60 + 180, // ËìùËâ≤Á≥ª
        life: 1, // ÁîüÂëΩÂÄºÔºåÁî®‰∫é‰∏¥Êó∂Á≤íÂ≠ê
        maxLife: 1,
        isTemporary: false
      }
    }
    
    // ÂàõÂª∫‰∏¥Êó∂‰∫§‰∫íÁ≤íÂ≠ê
    function createInteractiveParticle(x, y, vx = 0, vy = 0) {
      const particle = {
        x: x,
        y: y,
        vx: vx || (Math.random() - 0.5) * 3,
        vy: vy || (Math.random() - 0.5) * 3,
        radius: Math.random() * 1.5 + 1, // Ëøõ‰∏ÄÊ≠•Áº©Â∞èÁ≤íÂ≠êÂ§ßÂ∞è
        alpha: 0.8,
        hue: Math.random() * 60 + 180,
        life: 1,
        maxLife: 1,
        isTemporary: true,
        decay: 0, // ‰∏çËá™Âä®Ë°∞ÂáèÔºåÊåÅÁª≠Â≠òÂú®
        isPersistent: true // Ê†áËÆ∞‰∏∫ÊåÅ‰πÖÁ≤íÂ≠ê
      }
      return particle
    }
    
    // Èº†Ê†á‰∫§‰∫íÁä∂ÊÄÅ
    let mouseX = 0
    let mouseY = 0
    let isMouseInRightArea = false
    let isMousePressed = false
    let isDragging = false
    let dragStartX = 0
    let dragStartY = 0
    let longPressTimer = null
    let isLongPress = false
    let isInHeroSection = true // ÊòØÂê¶Âú®heroÂå∫Âüü
    
    const handleMouseMove = (event) => {
      const rect = canvas.getBoundingClientRect()
      const newMouseX = event.clientX - rect.left
      const newMouseY = event.clientY - rect.top
      
              // Ê£ÄÊü•ÊòØÂê¶Âú®Âè≥‰æßÂå∫ÂüüÔºàËôöÁ∫øÂ∑¶‰æßÂ∞±ÂºÄÂßãÔºåÂÆûÈôÖÊòØÂè≥‰æß50%Ôºâ
        const wasInRightArea = isMouseInRightArea
        isMouseInRightArea = newMouseX > canvas.width * 0.5
      

      
      // Ê£ÄÊµãÊãñÂä®ÔºàÂú®Âè≥‰æßÂå∫ÂüüÂÜÖ‰∏îÂú®heroÂå∫ÂüüÔºâ
      if (isMousePressed && !isLongPress && isMouseInRightArea && isInHeroSection) {
        const dragDistance = Math.sqrt(
          Math.pow(newMouseX - dragStartX, 2) + Math.pow(newMouseY - dragStartY, 2)
        )
        
        if (dragDistance > 5) { // Èôç‰ΩéÊãñÂä®ÈòàÂÄºÔºåÊõ¥ÂÆπÊòìËß¶Âèë
          isDragging = true
          // Ê∏ÖÈô§ÈïøÊåâÂÆöÊó∂Âô®
          if (longPressTimer) {
            clearTimeout(longPressTimer)
            longPressTimer = null
          }
        }
      }
      
      mouseX = newMouseX
      mouseY = newMouseY
    }
    
    // Èº†Ê†áÊåâ‰∏ã‰∫ã‰ª∂
    const handleMouseDown = (event) => {
      if (event.button !== 0 || !isInHeroSection) return // Âè™ÂìçÂ∫îÂ∑¶ÈîÆ‰∏îÂè™Âú®heroÂå∫Âüü
      
      const rect = canvas.getBoundingClientRect()
      const clickX = event.clientX - rect.left
      const clickY = event.clientY - rect.top
      

      
      isMousePressed = true
      isDragging = false
      isLongPress = false
      dragStartX = clickX
      dragStartY = clickY
      
              // ËÆæÁΩÆÈïøÊåâÂÆöÊó∂Âô®Ôºà500msÂêéËßÜ‰∏∫ÈïøÊåâÔºâ
        longPressTimer = setTimeout(() => {
          if (isMousePressed && !isDragging && clickX > canvas.width * 0.5) {
            isLongPress = true
          }
        }, 500)
    }
    
        // Èº†Ê†áÊä¨Ëµ∑‰∫ã‰ª∂
    const handleMouseUp = (event) => {
      if (!isInHeroSection) return // Âè™Âú®heroÂå∫ÂüüÂìçÂ∫î
      
      const rect = canvas.getBoundingClientRect()
      const clickX = event.clientX - rect.left
      const clickY = event.clientY - rect.top
      

      
      // Ê∏ÖÈô§ÈïøÊåâÂÆöÊó∂Âô®
      if (longPressTimer) {
        clearTimeout(longPressTimer)
        longPressTimer = null
      }
      
              // Âè™Âú®Âè≥‰æßÂå∫ÂüüÂìçÂ∫î
        if (clickX > canvas.width * 0.5) {
          // Â¶ÇÊûúÊòØÊôÆÈÄöÁÇπÂáªÔºàÈùûÊãñÂä®ÔºåÈùûÈïøÊåâÔºâ
          if (!isDragging && !isLongPress && particles.length + mouseParticles.length + particlesPerClick <= maxParticles) {
            // ÁîüÊàêÁ≤íÂ≠êÂêëÂõõÂë®Êâ©Êï£ÔºàÂ∞èËåÉÂõ¥Ôºâ
            for (let i = 0; i < particlesPerClick; i++) {
              const angle = Math.random() * Math.PI * 2 // 360Â∫¶ÂÖ®ÊñπÂêë
              const speed = Math.random() * 3 + 2 // ÂáèÂ∞èÊâ©Êï£ÈÄüÂ∫¶ÔºåÁ±ª‰ººlottieÂä®ÁîªËåÉÂõ¥
              const vx = Math.cos(angle) * speed
              const vy = Math.sin(angle) * speed
              
              mouseParticles.push(createInteractiveParticle(clickX, clickY, vx, vy))
            }
            // Á≤íÂ≠êÁîüÊàêÊàêÂäü
          } else {
            // Êó†Ê≥ïÁîüÊàêÁ≤íÂ≠ê - Â∑≤Ëææ‰∏äÈôêÊàñÁä∂ÊÄÅ‰∏çÁ¨¶
          }
        } else {
          // ÁÇπÂáª‰ΩçÁΩÆ‰∏çÂú®Âè≥‰æßÂå∫Âüü
        }
      
      isMousePressed = false
      isDragging = false
      isLongPress = false

    }
    
    // Ê∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨Âô®
    canvas.addEventListener('mousemove', handleMouseMove, { passive: false })
    canvas.addEventListener('mousedown', handleMouseDown, { passive: false })
    canvas.addEventListener('mouseup', handleMouseUp, { passive: false })
    canvas.addEventListener('click', (event) => {
      // Áõ¥Êé•Ë∞ÉÁî®mouseUpÂ§ÑÁêÜ
      handleMouseUp(event)
    }, { passive: false })
    
    // Èò≤Ê≠¢Âè≥ÈîÆËèúÂçïÂíå‰∫ã‰ª∂ÂÜíÊ≥°
    canvas.addEventListener('contextmenu', (e) => {
      e.preventDefault()
      e.stopPropagation()
    })
    
    // Á°Æ‰øùcanvasËÉΩÂ§üËé∑ÂæóÁÑ¶ÁÇπ
    canvas.setAttribute('tabindex', '0')
    canvas.style.outline = 'none'
    
    // ÊÄßËÉΩÁõëÊéß
    let frameCount = 0
    let lastTime = performance.now()
    let fps = 60
    
    const animate = () => {
      // ÊÄßËÉΩÁõëÊéß
      const currentTime = performance.now()
      frameCount++
      if (currentTime - lastTime >= 1000) {
        fps = frameCount
        frameCount = 0
        lastTime = currentTime
        
        // Â¶ÇÊûúFPSËøá‰ΩéÔºåËá™Âä®Ê∏ÖÁêÜÈÉ®ÂàÜÁ≤íÂ≠ê
        if (fps < 30 && mouseParticles.length > 200) {
          const removeCount = Math.floor(mouseParticles.length * 0.3)
          mouseParticles.splice(0, removeCount)
          // ÊÄßËÉΩ‰ºòÂåñ: Ëá™Âä®Ê∏ÖÁêÜÈÉ®ÂàÜÁ≤íÂ≠ê
        }
      }
      
      ctx.clearRect(0, 0, canvas.width, canvas.height)
      
      // ÁªòÂà∂Âü∫Á°ÄÁ≤íÂ≠ê
      particles.forEach((particle, index) => {
        // Êõ¥Êñ∞‰ΩçÁΩÆ
        particle.x += particle.vx
        particle.y += particle.vy
        
        // ËæπÁïåÊ£ÄÊµã
        if (particle.x < 0 || particle.x > canvas.width) particle.vx *= -1
        if (particle.y < 0 || particle.y > canvas.height) particle.vy *= -1
        
        // ÈïøÊåâÂê∏ÂºïÊïàÊûú - Âè™ÂØπÂè≥‰æßÂå∫ÂüüÁöÑÁ≤íÂ≠ê‰∏îÂú®heroÂå∫Âüü
        if (isLongPress && isMouseInRightArea && isInHeroSection && particle.x > canvas.width * 0.5) {
          const dx = mouseX - particle.x
          const dy = mouseY - particle.y
          const distance = Math.sqrt(dx * dx + dy * dy)
          
          if (distance < 400) { // Â¢ûÂ§ßÂê∏ÂºïËåÉÂõ¥
            // Â¶ÇÊûúË∑ùÁ¶ªÂæàËøëÔºåÁõ¥Êé•Ë∑üÈöèÈº†Ê†áÁßªÂä®
            if (distance < 50) {
              particle.vx = dx * 0.3 // Âº∫ÂäõË∑üÈöè
              particle.vy = dy * 0.3
            } else {
              const force = (400 - distance) / 400 * 0.2 // Â¢ûÂº∫Âê∏ÂºïÂäõ
              particle.vx += (dx / distance) * force
              particle.vy += (dy / distance) * force
            }
            
            // ÈôêÂà∂ÈÄüÂ∫¶
            const speed = Math.sqrt(particle.vx * particle.vx + particle.vy * particle.vy)
            if (speed > 12) {
              particle.vx = (particle.vx / speed) * 12
              particle.vy = (particle.vy / speed) * 12
            }
          }
        }
        
        // ÊãñÂä®ÂÜ≤Êï£ÊïàÊûú - Âè™ÂØπÂè≥‰æßÂå∫ÂüüÁöÑÁ≤íÂ≠ê‰∏îÂú®heroÂå∫Âüü
        if (isDragging && isMouseInRightArea && isInHeroSection && particle.x > canvas.width * 0.5) {
          const dx = particle.x - mouseX
          const dy = particle.y - mouseY
          const distance = Math.sqrt(dx * dx + dy * dy)
          
          if (distance < 250) { // Â¢ûÂ§ßÂÜ≤Êï£ËåÉÂõ¥
            const force = (250 - distance) / 250 * 0.2 // Â¢ûÂº∫ÂÜ≤Êï£Âäõ
            particle.vx += (dx / distance) * force
            particle.vy += (dy / distance) * force
            
            // ÈôêÂà∂ÈÄüÂ∫¶
            const speed = Math.sqrt(particle.vx * particle.vx + particle.vy * particle.vy)
            if (speed > 10) {
              particle.vx = (particle.vx / speed) * 10
              particle.vy = (particle.vy / speed) * 10
            }
          }
        }
        
        // ÁªòÂà∂Á≤íÂ≠ê
        ctx.beginPath()
        ctx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2)
        ctx.fillStyle = `hsla(${particle.hue}, 70%, 60%, ${particle.alpha})`
        ctx.fill()
      })
      
      // ÁªòÂà∂ÂíåÊõ¥Êñ∞Èº†Ê†á‰∫§‰∫íÁ≤íÂ≠ê
      for (let i = mouseParticles.length - 1; i >= 0; i--) {
        const particle = mouseParticles[i]
        
        // Êõ¥Êñ∞‰ΩçÁΩÆ
        particle.x += particle.vx
        particle.y += particle.vy
        
        // Â∫îÁî®Êë©Êì¶Âäõ
        particle.vx *= 0.995
        particle.vy *= 0.995
        
        // ËæπÁïåÂèçÂºπ
        if (particle.x < 0 || particle.x > canvas.width) particle.vx *= -0.8
        if (particle.y < 0 || particle.y > canvas.height) particle.vy *= -0.8
        
        // ÈïøÊåâÂê∏ÂºïÊïàÊûú - Âè™ÂØπÂè≥‰æßÂå∫ÂüüÁöÑ‰∫§‰∫íÁ≤íÂ≠ê‰∏îÂú®heroÂå∫Âüü
        if (isLongPress && isMouseInRightArea && isInHeroSection && particle.x > canvas.width * 0.5) {
          const dx = mouseX - particle.x
          const dy = mouseY - particle.y
          const distance = Math.sqrt(dx * dx + dy * dy)
          
          if (distance < 400) { // Â¢ûÂ§ßÂê∏ÂºïËåÉÂõ¥
            // Â¶ÇÊûúË∑ùÁ¶ªÂæàËøëÔºåÁõ¥Êé•Ë∑üÈöèÈº†Ê†áÁßªÂä®
            if (distance < 50) {
              particle.vx = dx * 0.4 // ‰∫§‰∫íÁ≤íÂ≠êÊõ¥Âº∫ÁöÑË∑üÈöè
              particle.vy = dy * 0.4
            } else {
              const force = (400 - distance) / 400 * 0.25 // Êõ¥Âº∫Âê∏ÂºïÂäõ
              particle.vx += (dx / distance) * force
              particle.vy += (dy / distance) * force
            }
          }
        }
        
        // ÊãñÂä®ÂÜ≤Êï£ÊïàÊûú - Âè™ÂØπÂè≥‰æßÂå∫ÂüüÁöÑ‰∫§‰∫íÁ≤íÂ≠ê‰∏îÂú®heroÂå∫Âüü
        if (isDragging && isMouseInRightArea && isInHeroSection && particle.x > canvas.width * 0.5) {
          const dx = particle.x - mouseX
          const dy = particle.y - mouseY
          const distance = Math.sqrt(dx * dx + dy * dy)
          
          if (distance < 250) { // Â¢ûÂ§ßÂÜ≤Êï£ËåÉÂõ¥
            const force = (250 - distance) / 250 * 0.25 // Â¢ûÂº∫ÂÜ≤Êï£Âäõ
            particle.vx += (dx / distance) * force
            particle.vy += (dy / distance) * force
          }
        }
        
        // ÈôêÂà∂‰∫§‰∫íÁ≤íÂ≠êÂú®Âè≥‰æßÂå∫Âüü
        if (particle.x < canvas.width * 0.5) {
          particle.x = canvas.width * 0.5
          particle.vx = Math.abs(particle.vx) * 0.5
        }
        
        // Êõ¥Êñ∞ÁîüÂëΩÂÄºÔºàÂè™ÊúâÈùûÊåÅ‰πÖÁ≤íÂ≠êÊâçË°∞ÂáèÔºâ
        if (!particle.isPersistent) {
          particle.life -= particle.decay
          particle.alpha = particle.life * 0.9
        }
        
        // ÁªòÂà∂Á≤íÂ≠ê
        if (particle.life > 0) {
          ctx.beginPath()
          ctx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2)
          ctx.fillStyle = `hsla(${particle.hue}, 80%, 70%, ${particle.alpha})`
          ctx.fill()
          
          // Ê∑ªÂä†ÂèëÂÖâÊïàÊûú
          ctx.shadowColor = `hsla(${particle.hue}, 80%, 70%, ${particle.alpha * 0.6})`
          ctx.shadowBlur = particle.radius * 1.5
          ctx.fill()
          ctx.shadowBlur = 0
        } else if (!particle.isPersistent) {
          // Âè™ÁßªÈô§ÈùûÊåÅ‰πÖÁöÑÊ≠ª‰∫°Á≤íÂ≠ê
          mouseParticles.splice(i, 1)
        }
      }
      
      // ÁªòÂà∂ËøûÊé•Á∫øÔºàÊÄßËÉΩ‰ºòÂåñÔºöÂè™Ê∏≤ÊüìÈÉ®ÂàÜËøûÊé•Á∫øÔºâ
      if (fps > 40) { // Âè™Âú®ÊÄßËÉΩËâØÂ•ΩÊó∂ÁªòÂà∂ËøûÊé•Á∫ø
        for (let i = 0; i < particles.length; i += 2) { // ÊØèÈöî‰∏Ä‰∏™Á≤íÂ≠êÊâçÂ§ÑÁêÜËøûÊé•Á∫ø
          const particle = particles[i]
          for (let j = i + 2; j < particles.length && j < i + 10; j += 2) { // ÈôêÂà∂ËøûÊé•Êï∞Èáè
            const otherParticle = particles[j]
            const dx = particle.x - otherParticle.x
            const dy = particle.y - otherParticle.y
            const distance = Math.sqrt(dx * dx + dy * dy)
            
            if (distance < 80) { // ÂáèÂ∞èËøûÊé•Ë∑ùÁ¶ª
              ctx.beginPath()
              ctx.moveTo(particle.x, particle.y)
              ctx.lineTo(otherParticle.x, otherParticle.y)
              ctx.strokeStyle = `hsla(${particle.hue}, 70%, 60%, ${0.1 * (1 - distance / 80)})`
              ctx.lineWidth = 0.5
              ctx.stroke()
            }
          }
        }
      }
      
      animationId = requestAnimationFrame(animate)
    }
    
    animate()
    
    // Á™óÂè£Â§ßÂ∞èÂèòÂåñÂ§ÑÁêÜ
    const handleResize = () => {
      canvas.width = window.innerWidth
      canvas.height = window.innerHeight
      
      // ÈáçÊñ∞ÂàÜÂ∏ÉÁ≤íÂ≠ê
      particles.forEach(particle => {
        if (particle.x > canvas.width) particle.x = canvas.width - 10
        if (particle.y > canvas.height) particle.y = canvas.height - 10
      })
    }
    
    window.addEventListener('resize', handleResize)
    
    // ÊªöÂä®ÁõëÂê¨Âô® - Ê£ÄÊµãheroÂå∫ÂüüÂíåÊ∏ÖÁêÜÁ≤íÂ≠ê
    let lastScrollY = window.scrollY
    const handleScroll = () => {
      const currentScrollY = window.scrollY
      const isScrollingDown = currentScrollY > lastScrollY
      
      // Ê£ÄÊµãÊòØÂê¶Âú®heroÂå∫ÂüüÔºàÈ¶ñÂ±èÈ´òÂ∫¶ÂÜÖÔºâ
      const heroHeight = window.innerHeight
      isInHeroSection = currentScrollY < heroHeight * 0.8 // ÊªöÂä®Ë∂ÖËøá80%ËßÜÂè£È´òÂ∫¶Êó∂Á¶ÅÁî®‰∫§‰∫í
      
      // ÂΩìÁ¶ªÂºÄheroÂå∫ÂüüÊó∂ÔºåÊ∏ÖÁêÜÊâÄÊúâ‰∫§‰∫íÁä∂ÊÄÅ
      if (!isInHeroSection) {
        isMousePressed = false
        isDragging = false
        isLongPress = false
        if (longPressTimer) {
          clearTimeout(longPressTimer)
          longPressTimer = null
        }
      }
      
      if (isScrollingDown) {
        const aboutSection = document.getElementById('about')
        if (aboutSection) {
          const rect = aboutSection.getBoundingClientRect()
          // ÂΩìÂêë‰∏ãÊªëÂä®‰∏îËâ∫ÊúØÂÆ∂ÁÆÄ‰ªãÈ°µÈù¢ËøõÂÖ•ËßÜÂè£Êó∂Ê∏ÖÁêÜÁ≤íÂ≠ê
          if (rect.top <= window.innerHeight && rect.bottom >= 0) {
            if (mouseParticles.length > 0) {
              mouseParticles.length = 0 // Ê∏ÖÁ©∫Êï∞ÁªÑ
            }
          }
        }
      }
      
      lastScrollY = currentScrollY
    }
    
    window.addEventListener('scroll', handleScroll)
    
    // Á≤íÂ≠êÁ≥ªÁªüÂàùÂßãÂåñÂÆåÊàê
    
    // Ê∏ÖÁêÜÂáΩÊï∞ÂíåÊé•Âè£
    return {
      cleanup: () => {
        canvas.removeEventListener('mousemove', handleMouseMove)
        canvas.removeEventListener('mousedown', handleMouseDown)
        canvas.removeEventListener('mouseup', handleMouseUp)
        canvas.removeEventListener('click', handleMouseUp)
        canvas.removeEventListener('contextmenu', (e) => e.preventDefault())
        window.removeEventListener('resize', handleResize)
        window.removeEventListener('scroll', handleScroll)
        
        // Ê∏ÖÁêÜÂÆöÊó∂Âô®
        if (longPressTimer) {
          clearTimeout(longPressTimer)
          longPressTimer = null
        }
        
        // Á≤íÂ≠êÁ≥ªÁªüÂ∑≤Ê∏ÖÁêÜ
      },

      getStatus: () => {
        return {
          baseParticles: particles.length,
          interactiveParticles: mouseParticles.length,
          total: particles.length + mouseParticles.length,
          maxParticles: maxParticles
        }
      }
    }
  }
  
  // ËßÜÈ¢ëÊí≠ÊîæÁªìÊùü‰∫ã‰ª∂
  const onVideoEnded = () => {
    console.log('üé¨ ËßÜÈ¢ëÊí≠ÊîæÂ∑≤ÁªìÊùüÔºåÂáÜÂ§áÂºÄÂßãËøáÊ∏°Âä®Áîª')
    // ÂèØ‰ª•Âú®ËøôÈáåÊ∑ªÂä†‰∏Ä‰∫õËßÜÈ¢ëÁªìÊùüÊó∂ÁöÑÁâπÊïà
  }
  
  // ËøáÊ∏°Âä®ÁîªÂºÄÂßã‰∫ã‰ª∂
  const onTransitionAnimationStarted = () => {
    console.log('‚ú® ËøáÊ∏°Âä®ÁîªÂ∑≤ÂºÄÂßã')
    // ÂèØ‰ª•Âú®ËøôÈáåÊöÇÂÅúËÉåÊôØÈü≥‰πê„ÄÅÂÅúÊ≠¢Á≤íÂ≠êÁ≥ªÁªüÁ≠â
    if (particlesInterface && particlesInterface.cleanup) {
      particlesInterface.cleanup()
    }
  }

  const typewriterText = ref(null)
  const artistIntro = ref(null)
  const identityShowcase = ref(null)
  const identityCarousel = ref(null)
  const scrollHint = ref(null)
  let currentIdentityIndex = 0

  // ÊâìÂ≠óÊïàÊûúÂÆûÁé∞
  const startTypewriter = () => {
    if (!typewriterText.value) return
    
    const text = typewriterText.value.textContent
    typewriterText.value.textContent = ''
    typewriterText.value.classList.add('typing')
    
    let i = 0
    const typeInterval = setInterval(() => {
      if (i < text.length) {
        typewriterText.value.textContent += text.charAt(i)
        i++
      } else {
        clearInterval(typeInterval)
        // ÊâìÂ≠óÊïàÊûúÂÆåÊàêÂêéÊòæÁ§∫ÁÆÄ‰ªãÂíåË∫´‰ªΩÊ†áÁ≠æ
        setTimeout(() => {
          if (artistIntro.value) {
            artistIntro.value.classList.add('show')
          }
          setTimeout(() => {
            if (identityShowcase.value) {
              identityShowcase.value.classList.add('show')
              startIdentityCarousel()
            }
            // ÊúÄÂêéÊòæÁ§∫ÊªöÂä®ÊèêÁ§∫
            setTimeout(() => {
              if (scrollHint.value) {
                scrollHint.value.classList.add('show')
              }
            }, 500)
          }, 400)
        }, 400)
      }
    }, 100)
  }

  // Ë∫´‰ªΩÊ†áÁ≠æËΩÆÊí≠ÂÆûÁé∞
  const startIdentityCarousel = () => {
    if (!identityCarousel.value) return
    
    const identities = identityCarousel.value.querySelectorAll('.identity-text')
    identities[0].classList.add('active')
    
    setInterval(() => {
      identities[currentIdentityIndex].classList.remove('active')
      currentIdentityIndex = (currentIdentityIndex + 1) % identities.length
      identities[currentIdentityIndex].classList.add('active')
    }, 2000)
  }

  // ÁõëÂê¨ÊªöÂä®‰∫ã‰ª∂ÔºåÂ§ÑÁêÜËøáÊ∏°ÊïàÊûú
  const handleScroll = () => {
    const aboutSection = document.getElementById('about')
    
    if (aboutSection && scrollHint.value) {
      const aboutRect = aboutSection.getBoundingClientRect()
      // Âè™Âú®aboutÈÉ®ÂàÜ‰∏îÊú™ÊªöÂä®Êó∂ÊòæÁ§∫ÊªöÂä®ÊèêÁ§∫
      if (aboutRect.top === 0 || (aboutRect.top > 0 && aboutRect.bottom > window.innerHeight)) {
        scrollHint.value.classList.remove('hide')
        scrollHint.value.classList.add('show')
      } else {
        scrollHint.value.classList.remove('show')
        scrollHint.value.classList.add('hide')
      }
    }
    
    // Â§ÑÁêÜÈ°µÈù¢ËøáÊ∏°ÊïàÊûú
    const sections = document.querySelectorAll('section')
    sections.forEach(section => {
      const rect = section.getBoundingClientRect()
      const isVisible = rect.top < window.innerHeight * 0.8 && rect.bottom > window.innerHeight * 0.2
      
      if (isVisible) {
        section.classList.remove('transitioning')
      } else {
        section.classList.add('transitioning')
      }
    })
  }

  // ÁõëÂê¨ÊªöÂä®‰∫ã‰ª∂ÔºåËß¶ÂèëÊâìÂ≠óÊïàÊûú
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        startTypewriter()
        observer.disconnect()
      }
    })
  }, { threshold: 0.5 })

  onMounted(() => {
    if (typewriterText.value) {
      observer.observe(typewriterText.value)
    }
    window.addEventListener('scroll', handleScroll)
  })

  onUnmounted(() => {
    window.removeEventListener('scroll', handleScroll)
  })

  const modelContainer = ref(null)
const modelCanvas = ref(null)
let scene, camera, renderer, controls, model
let animationFrameId = null

// Ê®°ÂûãÂèÇÊï∞‰ªéÂ§ñÈÉ®Êñá‰ª∂ÂØºÂÖ•
const modelParams = ref(defaultModelParams)

// Êõ¥Êñ∞Ê®°ÂûãÂèÇÊï∞
const updateModelParams = () => {
  if (!model) return
  
  // Êõ¥Êñ∞Ê®°ÂûãÂèòÊç¢
  model.scale.set(modelParams.value.scale, modelParams.value.scale, modelParams.value.scale)
  model.rotation.set(
    modelParams.value.rotationX * Math.PI / 180,
    modelParams.value.rotationY * Math.PI / 180,
    modelParams.value.rotationZ * Math.PI / 180
  )
  model.position.set(modelParams.value.positionX, modelParams.value.positionY, modelParams.value.positionZ)
  
  // Êõ¥Êñ∞Áõ∏Êú∫
  camera.position.set(
    modelParams.value.cameraPositionX,
    modelParams.value.cameraPositionY,
    modelParams.value.cameraPositionZ
  )
  camera.fov = modelParams.value.cameraFov
  camera.updateProjectionMatrix()
  
  // Êõ¥Êñ∞ÁÅØÂÖâ
  if (scene.children.length > 0) {
    const ambientLight = scene.children.find(child => child instanceof THREE.AmbientLight)
    const directionalLight = scene.children.find(child => child instanceof THREE.DirectionalLight)
    
    if (ambientLight) {
      ambientLight.intensity = modelParams.value.ambientIntensity
    }
    if (directionalLight) {
      directionalLight.intensity = modelParams.value.directionalIntensity
      directionalLight.position.set(
        modelParams.value.directionalPositionX,
        modelParams.value.directionalPositionY,
        modelParams.value.directionalPositionZ
      )
    }
  }
  
  // Êõ¥Êñ∞ÊéßÂà∂Âô®
  if (controls) {
    controls.enableDamping = modelParams.value.enableDamping
    controls.dampingFactor = modelParams.value.dampingFactor
  }
}

// ÂØºÂá∫ÂèÇÊï∞‰∏∫JSON
const exportParams = () => {
  const json = JSON.stringify(modelParams.value, null, 2)
  const blob = new Blob([json], { type: 'application/json' })
  const url = URL.createObjectURL(blob)
  const a = document.createElement('a')
  a.href = url
  a.download = 'model-params.json'
  a.click()
  URL.revokeObjectURL(url)
}

// ÂØºÂÖ•ÂèÇÊï∞
const importParams = (json) => {
  try {
    const params = JSON.parse(json)
    modelParams.value = { ...modelParams.value, ...params }
    updateModelParams()
  } catch (error) {
    console.error('ÂØºÂÖ•ÂèÇÊï∞Â§±Ë¥•:', error)
  }
}

  // ÂàùÂßãÂåñ3DÂú∫ÊôØ
  const initScene = () => {
    scene = new THREE.Scene()
    
    // ËÆæÁΩÆÁõ∏Êú∫
    camera = new THREE.PerspectiveCamera(
      45,
      modelCanvas.value.clientWidth / modelCanvas.value.clientHeight,
      0.1,
      1000
    )
    camera.position.set(0, 0, 5)

      // ËÆæÁΩÆÊ∏≤ÊüìÂô®
  renderer = new THREE.WebGLRenderer({
    canvas: modelCanvas.value,
    antialias: true,
    alpha: true
  })
  renderer.setSize(modelCanvas.value.clientWidth, modelCanvas.value.clientHeight)
  renderer.setPixelRatio(window.devicePixelRatio)
  renderer.outputEncoding = THREE.sRGBEncoding
  renderer.setClearColor(0x000000, 0) // ËÆæÁΩÆÈÄèÊòéËÉåÊôØ
    
    // Ê∑ªÂä†ÁéØÂ¢ÉÂÖâÂíåÂπ≥Ë°åÂÖâ
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.5)
    scene.add(ambientLight)
    
    const directionalLight = new THREE.DirectionalLight(0xffffff, 1)
    directionalLight.position.set(5, 5, 5)
    scene.add(directionalLight)

    // Ê∑ªÂä†ËΩ®ÈÅìÊéßÂà∂Âô®
    controls = new OrbitControls(camera, modelCanvas.value)
    controls.enableDamping = true
    controls.dampingFactor = 0.05
    
      // Âä†ËΩΩÊ®°Âûã
  const loader = new GLTFLoader()
  loader.load(
    './models/model.glb',
      (gltf) => {
        model = gltf.scene
        scene.add(model)
        
              // Â∫îÁî®ÂàùÂßãÂèÇÊï∞
      updateModelParams()
      
      // Âä®ÁîªÂæ™ÁéØ
      const animate = () => {
        if (model && modelParams.value.autoRotate) {
          model.rotation.y += modelParams.value.autoRotateSpeed
          modelParams.value.rotationY = (model.rotation.y * 180 / Math.PI) % 360
        }
        controls.update()
        renderer.render(scene, camera)
        animationFrameId = requestAnimationFrame(animate)
      }
      animate()
      },
      (progress) => {
        console.log('Loading model...', (progress.loaded / progress.total * 100) + '%')
      },
      (error) => {
        console.error('Error loading model:', error)
      }
    )
  }

  // Â§ÑÁêÜÁ™óÂè£Â§ßÂ∞èÂèòÂåñ
  const handleResize = () => {
    if (camera && renderer && modelCanvas.value) {
      camera.aspect = modelCanvas.value.clientWidth / modelCanvas.value.clientHeight
      camera.updateProjectionMatrix()
      renderer.setSize(modelCanvas.value.clientWidth, modelCanvas.value.clientHeight)
    }
  }

  onMounted(() => {
    initScene()
    window.addEventListener('resize', handleResize)
  })

  onBeforeUnmount(() => {
  window.removeEventListener('resize', handleResize)
  if (animationFrameId !== null) {
    cancelAnimationFrame(animationFrameId)
  }
  if (controls) {
    controls.dispose()
  }
  if (renderer) {
    renderer.dispose()
  }
  if (scene) {
    while(scene.children.length > 0) { 
      scene.remove(scene.children[0])
    }
  }
})
</script>
 